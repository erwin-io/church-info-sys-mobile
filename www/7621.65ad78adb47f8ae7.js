"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7621],{7956:(y,f,n)=>{n.d(f,{p:()=>l});var m=n(655),o=n(5e3),s=n(8779);let c=(()=>{class e{constructor(){this.message="Loading..."}ngOnInit(){}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-page-loader"]],decls:5,vars:1,consts:[[1,"container"],[1,"holder"],["color","primary"]],template:function(a,u){1&a&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"ion-spinner",2),o.TgZ(3,"span"),o._uU(4),o.qZA()()()),2&a&&(o.xp6(4),o.Oqu(u.message))},dependencies:[s.PQ],styles:[".container{height:100%;display:flex;align-items:center;flex-direction:column;justify-content:center}.container .holder{display:flex;align-items:center;gap:10px;flex-direction:column;font-size:20px;text-shadow:none!important}\n"],encapsulation:2}),e})(),l=(()=>{class e{constructor(a){this.modalCtrl=a}open(a){return(0,m.mG)(this,void 0,void 0,function*(){this.modal&&(yield this.modal.dismiss()),this.modal=yield this.modalCtrl.create({component:c,id:"page-loader",cssClass:"modal-fullscreen",canDismiss:!1,componentProps:{message:a}}),this.modal.present()})}close(){return(0,m.mG)(this,void 0,void 0,function*(){this.modal.canDismiss=!0,yield this.modal.dismiss()})}}return e.\u0275fac=function(a){return new(a||e)(o.LFG(s.IN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7621:(y,f,n)=>{n.r(f),n.d(f,{VerifyOtpPageModule:()=>A});var m=n(9808),o=n(3075),s=n(8779),c=n(4132),l=n(655),e=n(5e3),g=n(263),a=n(8386),u=n(3746),O=n(792),P=n(9709),C=n(7956),M=n(7703),h=n(7322),x=n(7531);const S=[{path:"",component:(()=>{class i{constructor(r,t,d,v,L,V,w,F,Z){this.formBuilder=r,this.router=t,this.authService=d,this.userService=v,this.alertController=L,this.storageService=V,this.loaderService=w,this.appconfig=F,this.pageLoaderService=Z,this.isSubmitting=!1,this.sessionTimeout=Number(this.appconfig.config.sessionConfig.sessionTimeout)}get formData(){return Object.assign(Object.assign({},this.verifyOtpForm.value),{userId:this.userId})}ngOnInit(){window.history.state&&window.history.state.data&&window.history.state.data.userId?(this.userId=window.history.state.data.userId,console.log(window.history.state.data)):this.router.navigate(["/login"],{replaceUrl:!0}),this.verifyOtpForm=this.formBuilder.group({otp:[null,o.kI.required]})}onFormSubmit(){return(0,l.mG)(this,void 0,void 0,function*(){if(!this.verifyOtpForm.valid)return;const r=this.formData;console.log(r);try{this.isSubmitting=!0,yield this.pageLoaderService.open("Verifying please wait..."),this.authService.verifyOtp(r).subscribe(t=>(0,l.mG)(this,void 0,void 0,function*(){if(yield this.pageLoaderService.close(),t.success){this.storageService.saveRefreshToken(t.data.accessToken),this.storageService.saveAccessToken(t.data.refreshToken),this.storageService.saveTotalUnreadNotif(t.data.totalUnreadNotif);const d=new Date;d.setTime(d.getTime()+1e3*this.sessionTimeout),this.storageService.saveSessionExpiredDate(d),this.storageService.saveLoginUser(t.data),this.router.navigate(["/"],{replaceUrl:!0}),this.isSubmitting=!1}else this.isSubmitting=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(t.message)?t.message[0]:t.message,buttons:["OK"]})}),t=>(0,l.mG)(this,void 0,void 0,function*(){yield this.pageLoaderService.close(),console.log(t),this.isSubmitting=!1,yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(t.message)?t.message[0]:t.message,buttons:["OK"]})}))}catch(t){yield this.pageLoaderService.close(),console.log(t),this.isSubmitting=!1,yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(t.message)?t.message[0]:t.message,buttons:["OK"]})}})}presentAlert(r){return(0,l.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create(r)).present()})}}return i.\u0275fac=function(r){return new(r||i)(e.Y36(o.qu),e.Y36(c.F0),e.Y36(g.e),e.Y36(a.K),e.Y36(s.Br),e.Y36(u.V),e.Y36(O.D),e.Y36(P._),e.Y36(C.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-verify-otp"]],decls:20,vars:2,consts:[[1,"verify-otp","container"],[1,"form-container"],[3,"formGroup","ngSubmit"],[3,"disabled"],[1,"form-field-group"],[1,"verify-otp-text"],["appearance","outline"],["matInput","","type","text","placeholder","OTP","formControlName","otp","oninput","this.value = this.value.toLowerCase()"],[1,"action"],["type","submit","mat-flat-button","","color","primary"],[1,"verify-otp-footer"],["routerLink","/login","replaceUrl","true"]],template:function(r,t){1&r&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"form",2),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.TgZ(4,"fieldset",3)(5,"div",4)(6,"span",5),e._uU(7,"Verify OTP"),e.qZA()(),e.TgZ(8,"div",4)(9,"mat-form-field",6)(10,"mat-label"),e._uU(11,"OTP"),e.qZA(),e._UZ(12,"input",7),e.qZA()(),e.TgZ(13,"div",8)(14,"button",9),e._uU(15,"Verify"),e.qZA()()()()(),e.TgZ(16,"div",10)(17,"span")(18,"a",11),e._uU(19,"Back to login"),e.qZA()()()()()),2&r&&(e.xp6(3),e.Q6J("formGroup",t.verifyOtpForm),e.xp6(1),e.Q6J("disabled",t.isSubmitting))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,s.W2,s.Fo,c.yS,M.lW,h.KE,h.hX,x.Nt],styles:[".container[_ngcontent-%COMP%]{height:100%;display:flex;padding:0 40px!important}.container.verify-otp[_ngcontent-%COMP%]{flex-direction:column;justify-content:flex-start!important}.container.verify-otp[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]{text-transform:uppercase;white-space:pre;overflow:visible;font-weight:400;font-style:normal;font-family:Sumana,serif;color:#247881;font-size:23px;letter-spacing:0px;line-height:1.2;text-align:center;margin:0 0 25px!important}.container.verify-otp[_ngcontent-%COMP%]   .app_banner[_ngcontent-%COMP%]{display:flex;flex-grow:1;height:104px;justify-content:center;margin-bottom:57px!important}.container.verify-otp[_ngcontent-%COMP%]   .app_banner[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{width:299px}.container.verify-otp[_ngcontent-%COMP%]   .app_banner[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;background-repeat:no-repeat;background-position:center center;background-size:cover}.container.verify-otp[_ngcontent-%COMP%]   .verify-otp-text[_ngcontent-%COMP%]{text-align:center}.container.verify-otp[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container.verify-otp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;letter-spacing:0px;line-height:1.2}.container.verify-otp[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-direction:row;justify-content:center;align-items:center;width:100%!important}.container.verify-otp[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;row-gap:5px}.container.verify-otp[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{flex-grow:1}.container.verify-otp[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:53px;font-size:16px;letter-spacing:0px;line-height:1.2}.container.verify-otp[_ngcontent-%COMP%]   .verify-otp-footer[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;height:103px;justify-content:flex-end;padding:20px 0}.container.verify-otp[_ngcontent-%COMP%]   .verify-otp-footer[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#000!important}.container.verify-otp[_ngcontent-%COMP%]   .verify-otp-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline}"]}),i})()}];let T=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.Bz.forChild(S),c.Bz]}),i})();var b=n(5268);let A=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,o.u5,o.UX,s.Pc,T,b.q]}),i})()}}]);