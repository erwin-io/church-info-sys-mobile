"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[325],{2669:(R,I,r)=>{r.d(I,{D:()=>E});var _=r(1086),y=r(2868),t=r(7221),i=r(2340),f=r(5e3),e=r(520),U=r(9709);let E=(()=>{class Z{constructor(x,A){this.http=x,this.appconfig=A}getByStatus(x){return this.http.get(i.N.apiBaseUrl+this.appconfig.config.apiEndPoints.reservation.getByStatus,{params:x}).pipe((0,y.b)(A=>this.log("reservation")),(0,t.K)(this.handleError("reservation",[])))}getById(x){return this.http.get(i.N.apiBaseUrl+this.appconfig.config.apiEndPoints.reservation.getById+x).pipe((0,y.b)(A=>this.log("reservation")),(0,t.K)(this.handleError("reservation",[])))}getReservationsForADay(x){return this.http.get(i.N.apiBaseUrl+this.appconfig.config.apiEndPoints.reservation.getReservationForADay+x).pipe((0,y.b)(A=>this.log("reservation")),(0,t.K)(this.handleError("reservation",[])))}createReservation(x){return this.http.post(i.N.apiBaseUrl+this.appconfig.config.apiEndPoints.reservation.createReservation,x).pipe((0,y.b)(A=>this.log("reservation")),(0,t.K)(this.handleError("reservation",[])))}rescheduleReservation(x){return this.http.put(i.N.apiBaseUrl+this.appconfig.config.apiEndPoints.reservation.rescheduleReservation,x).pipe((0,y.b)(A=>this.log("reservation")),(0,t.K)(this.handleError("reservation",[])))}updateReservationStatus(x){return this.http.put(i.N.apiBaseUrl+this.appconfig.config.apiEndPoints.reservation.updateReservationStatus,x).pipe((0,y.b)(A=>this.log("reservation")),(0,t.K)(this.handleError("reservation",[])))}handleError(x="operation",A){return S=>(this.log(`${x} failed: ${Array.isArray(S.error.message)?S.error.message[0]:S.error.message}`),(0,_.of)(S.error))}log(x){console.log(x)}}return Z.\u0275fac=function(x){return new(x||Z)(f.LFG(e.eN),f.LFG(U._))},Z.\u0275prov=f.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})()},6263:(R,I,r)=>{r.d(I,{t:()=>p});var _=r(655),y=r(3075),t=r(8779),i=r(5439),e=r(5e3),U=r(2669),E=r(7956),Z=r(9709),n=r(2313),x=r(9808),A=r(2081),S=r(7322),J=r(7531);const w=["reservationStepper"],q=["selectTimeSlotDateCtrl"];function v(c,T){1&c&&(e.TgZ(0,"span",44),e._uU(1," Please select a reservation type "),e.qZA())}function b(c,T){1&c&&(e.TgZ(0,"span",44),e._uU(1," Please select a mass category "),e.qZA())}function a(c,T){1&c&&(e.TgZ(0,"span",44),e._uU(1," Please select a mass intention type "),e.qZA())}function h(c,T){if(1&c&&e._UZ(0,"ion-datetime",45,46),2&c){const o=e.oxw();e.Q6J("min",o.minDate)("showDefaultButtons",!0)}}function s(c,T){1&c&&(e.TgZ(0,"mat-label"),e._uU(1,"Select time slot"),e.qZA())}function g(c,T){if(1&c&&(e.TgZ(0,"ion-item",18)(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"ion-radio",50),e.qZA()),2&c){const o=T.$implicit,l=e.oxw(3);e.xp6(2),e.Oqu(l.tConvert(o)),e.xp6(1),e.Q6J("value",o)}}function P(c,T){if(1&c&&(e.TgZ(0,"ion-radio-group",48),e.YNc(1,g,4,2,"ion-item",49),e.qZA()),2&c){const o=e.oxw(2);e.Q6J("disabled",o.isLoading),e.xp6(1),e.Q6J("ngForOf",o.availableTimeSlot)}}function L(c,T){if(1&c&&(e.TgZ(0,"div",16),e.YNc(1,s,2,0,"mat-label",35),e.YNc(2,P,2,2,"ion-radio-group",47),e.qZA()),2&c){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.availableTimeSlot.length>0),e.xp6(1),e.Q6J("ngIf",o.availableTimeSlot.length>0)}}function Y(c,T){1&c&&(e.TgZ(0,"div",51)(1,"span"),e._uU(2,"Loading time slot please wait..."),e.qZA()())}function k(c,T){1&c&&(e.ynx(0),e.TgZ(1,"div",51)(2,"span"),e._uU(3,"Sorry!"),e._UZ(4,"br"),e._uU(5,"No available time slot to show, "),e._UZ(6,"br"),e._uU(7,"try another date"),e.qZA()(),e.BQk())}function Q(c,T){if(1&c&&(e.TgZ(0,"ion-label")(1,"h3",54)(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"p",54),e._uU(5,"Reservation type"),e.qZA()()),2&c){const o=e.oxw(2);e.xp6(3),e.Oqu(o.previewData.reservationType)}}function F(c,T){if(1&c&&(e.TgZ(0,"ion-item")(1,"ion-label")(2,"h3",54)(3,"strong"),e._uU(4),e.qZA()(),e.TgZ(5,"p",54),e._uU(6,"Mass Category"),e.qZA()()()),2&c){const o=e.oxw(2);e.xp6(4),e.Oqu(o.previewData.massCategory)}}function B(c,T){if(1&c&&(e.TgZ(0,"ion-item")(1,"ion-label")(2,"h3",54)(3,"strong"),e._uU(4),e.qZA()(),e.TgZ(5,"p",54),e._uU(6,"Mass intention type"),e.qZA()()()),2&c){const o=e.oxw(2);e.xp6(4),e.Oqu(o.previewData.massIntentionType)}}function H(c,T){if(1&c&&(e.TgZ(0,"ion-item")(1,"ion-label")(2,"h3",54)(3,"strong"),e._uU(4),e.ALo(5,"date"),e.qZA()(),e.TgZ(6,"p",54),e._uU(7,"Date"),e.qZA()()()),2&c){const o=e.oxw(2);e.xp6(4),e.Oqu(e.xi3(5,1,o.previewData.reservationDate+" "+o.formData.time,"EEE, MMM dd hh:mm a"))}}function G(c,T){if(1&c&&(e.TgZ(0,"ion-item")(1,"ion-label")(2,"h3",54)(3,"strong"),e._uU(4),e.qZA()(),e.TgZ(5,"p",54),e._uU(6,"Remarks"),e.qZA()()()),2&c){const o=e.oxw(2);e.xp6(4),e.Oqu(o.previewData.remarks)}}function ee(c,T){if(1&c&&(e.TgZ(0,"ion-content")(1,"h3",52)(2,"strong"),e._uU(3,"Preview"),e.qZA()(),e.TgZ(4,"ion-list",53)(5,"ion-item"),e.YNc(6,Q,6,1,"ion-label",35),e.qZA(),e.YNc(7,F,7,1,"ion-item",35),e.YNc(8,B,7,1,"ion-item",35),e.YNc(9,H,8,4,"ion-item",35),e.YNc(10,G,7,1,"ion-item",35),e.qZA()()),2&c){const o=e.oxw();e.xp6(6),e.Q6J("ngIf",o.previewData.reservationType&&""!==o.previewData.reservationType),e.xp6(1),e.Q6J("ngIf",o.previewData.massCategory&&""!==o.previewData.massCategory),e.xp6(1),e.Q6J("ngIf",o.previewData.massIntentionType&&""!==o.previewData.massIntentionType),e.xp6(1),e.Q6J("ngIf",o.previewData.reservationDate&&""!==o.selectTimeSlotForm.value.selectTime&&!o.formData.time.toLowerCase().includes("invalid date")),e.xp6(1),e.Q6J("ngIf",o.previewData.remarks&&""!==o.previewData.remarks)}}function z(c,T){if(1&c){const o=e.EpF();e.TgZ(0,"ion-button",55),e.NdJ("click",function(){e.CHM(o);const m=e.oxw();return e.KtG(m.onReservationTypeSelected(m.formData.reservationTypeId))}),e._uU(1,"Next"),e.qZA()}if(2&c){const o=e.oxw();e.Q6J("disabled",o.isLoading||!o.selectReservationTypeForm.valid)}}function j(c,T){if(1&c){const o=e.EpF();e.TgZ(0,"ion-button",55),e.NdJ("click",function(){e.CHM(o);const m=e.oxw();return e.KtG(m.onMassCategorySelected())}),e._uU(1,"Next"),e.qZA()}if(2&c){const o=e.oxw();e.Q6J("disabled",o.isLoading||!o.selectMassCategoryForm.valid)}}function $(c,T){if(1&c){const o=e.EpF();e.TgZ(0,"ion-button",55),e.NdJ("click",function(){e.CHM(o);const m=e.oxw();return e.KtG(m.onMassIntensionTypeSelected())}),e._uU(1,"Next"),e.qZA()}if(2&c){const o=e.oxw();e.Q6J("disabled",o.isLoading||!o.selectMassIntensionTypeForm.valid)}}function X(c,T){if(1&c){const o=e.EpF();e.TgZ(0,"ion-button",55),e.NdJ("click",function(){e.CHM(o),e.oxw();const m=e.MAs(19);return e.KtG(m.next())}),e._uU(1,"Next"),e.qZA()}if(2&c){const o=e.oxw();e.Q6J("disabled",o.isLoading||!o.selectTimeSlotForm.valid)}}function V(c,T){if(1&c){const o=e.EpF();e.TgZ(0,"ion-button",55),e.NdJ("click",function(){e.CHM(o);const m=e.oxw();return e.KtG(m.save())}),e._uU(1,"Save"),e.qZA()}if(2&c){const o=e.oxw();e.Q6J("disabled",o.isLoading||!o.remarksForm.valid)}}function u(c,T){if(1&c){const o=e.EpF();e.TgZ(0,"ion-button",56),e.NdJ("click",function(){e.CHM(o);const m=e.oxw();return e.KtG(m.onBack())}),e._uU(1,"Back"),e.qZA()}}const M=function(c){return{display:c}},d=function(){return[0,.25,.5,.8,1]};let p=(()=>{class c{constructor(o,l,m,O,C,N,D,K,te){this.modalCtrl=o,this.formBuilder=l,this.alertController=m,this.reservationService=O,this.actionSheetController=C,this.pageLoaderService=N,this.appconfig=D,this.platform=K,this.sanitizer=te,this.isNew=!1,this.details={},this.isSubmitting=!1,this.isLoading=!1,this.reservationTypeOption=[],this.allowToClose=!1,this.availableTimeSlot=[],this.timeSlotConfig={start:"08:00",end:"17:00",notAvailableHours:["12:00"],durationInHours:1,dayOfWeekNotAvailable:["Sunday","Wednesday","Saturday"]},this.currentDate=new Date,this.minDate=new Date((new Date).setDate(this.currentDate.getDate()+1)).toISOString(),this.toMinutes=W=>W.split(":").reduce((ne,ie)=>60*ne+ +ie),this.toString=W=>(Math.floor(W/60)+":"+W%60).replace(/\b\d\b/,"0$&"),this.timeSlotConfig.start=this.toMinutes(this.appconfig.config.reservationConfig.timeSlotHours.start),this.timeSlotConfig.end=this.toMinutes(this.appconfig.config.reservationConfig.timeSlotHours.end),this.timeSlotConfig.notAvailableHours=this.appconfig.config.reservationConfig.timeSlotNotAvailableHours,this.timeSlotConfig.dayOfWeekNotAvailable=this.appconfig.config.reservationConfig.dayOfWeekNotAvailable,this.reservationTypeOption=this.appconfig.config.lookup.reservationType,this.platform.backButton.subscribeWithPriority(-1,()=>{this.cancel()})}get formData(){return{reservationDate:this.selectTimeSlotForm.value.selectTimeSlotDate?i(this.selectTimeSlotForm.value.selectTimeSlotDate).format("YYYY-MM-DD"):null,time:i(i(this.selectTimeSlotForm.value.selectTimeSlotDate).format("YYYY-MM-DD")+" "+this.selectTimeSlotForm.value.selectTime).format("HH:mm"),clientId:this.currentUser.clientId,reservationTypeId:this.selectReservationTypeForm.valid?this.selectReservationTypeForm.value.reservationTypeId:null,massCategoryId:"1"!==this.selectReservationTypeForm.value.reservationTypeId&&"2"!==this.selectReservationTypeForm.value.reservationTypeId||!this.selectMassCategoryForm.valid?null:this.selectMassCategoryForm.value.massCategoryId,massIntentionTypeId:this.selectMassIntensionTypeForm.value.massIntentionTypeId&&"3"===this.selectReservationTypeForm.value.reservationTypeId&&this.selectMassIntensionTypeForm.valid?this.selectMassIntensionTypeForm.value.massIntentionTypeId:null,remarks:this.remarksForm.value.remarks}}get errorControls(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.selectReservationTypeForm.controls),this.selectMassCategoryForm.controls),this.selectMassIntensionTypeForm.controls),this.selectTimeSlotForm.controls),this.remarksForm.controls)}get previewData(){return console.log(this.formData),{reservationType:this.formData.reservationTypeId?this.appconfig.config.lookup.reservationType.filter(o=>Number(o.reservationTypeId)===Number(this.formData.reservationTypeId))[0].name:"",reservationDate:this.formData.reservationDate,massCategory:this.formData.massCategoryId?this.appconfig.config.lookup.massCategory.filter(o=>Number(o.massCategoryId)===Number(this.formData.massCategoryId))[0].name:"",massIntentionType:this.formData.massIntentionTypeId?this.appconfig.config.lookup.massIntentionType.filter(o=>Number(o.massIntentionTypeId)===Number(this.formData.massIntentionTypeId))[0].name:"",remarks:this.formData.remarks}}ngOnInit(){this.selectReservationTypeForm=this.formBuilder.group({reservationTypeId:[null,y.kI.required]}),this.selectMassCategoryForm=this.formBuilder.group({massCategoryId:[null,y.kI.required]}),this.selectMassIntensionTypeForm=this.formBuilder.group({massIntentionTypeId:[null,y.kI.required]}),this.selectTimeSlotForm=this.formBuilder.group({selectTimeSlotDate:[this.minDate,y.kI.required],selectTime:[null,y.kI.required]}),this.remarksForm=this.formBuilder.group({remarks:[]}),this.allowToClose=!0,this.getReservationsForADay(i(this.minDate).format("YYYY-MM-DD"),this.timeSlotOptions(this.timeSlotConfig.durationInHours)),this.selectTimeSlotForm.get("selectTimeSlotDate").valueChanges.subscribe(o=>(0,_.mG)(this,void 0,void 0,function*(){this.selectTimeSlotForm.controls.selectTime.setValue(null);const l=new Date(o).toLocaleDateString("en-US",{weekday:"long"});this.timeSlotConfig.dayOfWeekNotAvailable.filter(O=>O.toLowerCase().includes(l.toLowerCase())).length<=0?yield this.getReservationsForADay(i(this.formData.reservationDate).format("YYYY-MM-DD"),this.timeSlotOptions(this.timeSlotConfig.durationInHours)):this.availableTimeSlot=[]})),this.subscription=this.platform.backButton.subscribeWithPriority(9999,o=>{this.modal.canDismiss&&this.cancel(),this.pageLoaderService.close()})}initTimeSlot(){return(0,_.mG)(this,void 0,void 0,function*(){this.selectTimeSlotForm.controls.selectTime.setValue(null);const o=new Date(this.formData.reservationDate).toLocaleDateString("en-US",{weekday:"long"});this.timeSlotConfig.dayOfWeekNotAvailable.filter(m=>m.toLowerCase().includes(o.toLowerCase())).length<=0?yield this.getReservationsForADay(i(this.formData.reservationDate).format("YYYY-MM-DD"),this.timeSlotOptions(this.timeSlotConfig.durationInHours)):this.availableTimeSlot=[]})}ionViewWillLeave(){this.subscription.unsubscribe()}onSelectFocus(o,l){console.log("click"),setTimeout(()=>{o.setValue(l)},1e3)}onReservationTypeSelected(o){return(0,_.mG)(this,void 0,void 0,function*(){"1"===o||"2"===o?this.reservationStepper.next():"3"===o?this.reservationStepper.selectedIndex=2:(this.reservationStepper.selectedIndex=3,this.timeSlotConfig.start=this.toMinutes("08:00"),this.timeSlotConfig.end=this.toMinutes("16:00"),this.timeSlotConfig.durationInHours=1,this.timeSlotConfig.timeSlotNotAvailableHours=["12:00","17:00"],this.timeSlotConfig.dayOfWeekNotAvailable=[],yield this.initTimeSlot())})}onMassCategorySelected(){return(0,_.mG)(this,void 0,void 0,function*(){this.reservationStepper.selectedIndex=3,"1"===this.formData.reservationTypeId?"1"===this.formData.massCategoryId?(this.timeSlotConfig.start=this.toMinutes("08:00"),this.timeSlotConfig.end=this.toMinutes("16:00"),this.timeSlotConfig.durationInHours=1,this.timeSlotConfig.timeSlotNotAvailableHours=["12:00"],this.timeSlotConfig.dayOfWeekNotAvailable=["Sunday"]):(this.timeSlotConfig.start=this.toMinutes("11:00"),this.timeSlotConfig.end=this.toMinutes("12:00"),this.timeSlotConfig.durationInHours=8,this.timeSlotConfig.timeSlotNotAvailableHours=["08:00","09:00","10:00","12:00","13:00","14:00","15:00","16:00","17:00"],this.timeSlotConfig.dayOfWeekNotAvailable=["Monday","Tuesday","Wednesday","Thursday","Friday","Sunday"]):"2"===this.formData.reservationTypeId?"1"===this.formData.massCategoryId?(this.timeSlotConfig.start=this.toMinutes("08:00"),this.timeSlotConfig.end=this.toMinutes("16:00"),this.timeSlotConfig.durationInHours=1,this.timeSlotConfig.timeSlotNotAvailableHours=["12:00"],this.timeSlotConfig.dayOfWeekNotAvailable=["Sunday"]):(this.timeSlotConfig.start=this.toMinutes("08:00"),this.timeSlotConfig.end=this.toMinutes("09:00"),this.timeSlotConfig.durationInHours=8,this.timeSlotConfig.timeSlotNotAvailableHours=["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00"],this.timeSlotConfig.dayOfWeekNotAvailable=["Monday","Tuesday","Wednesday","Thursday","Friday","Sunday"]):(this.timeSlotConfig.start=this.toMinutes("08:00"),this.timeSlotConfig.end=this.toMinutes("17:00"),this.timeSlotConfig.durationInHours=1,this.timeSlotConfig.timeSlotNotAvailableHours=["12:00"],this.timeSlotConfig.dayOfWeekNotAvailable=[]),yield this.initTimeSlot()})}onMassIntensionTypeSelected(){return(0,_.mG)(this,void 0,void 0,function*(){this.reservationStepper.next(),this.timeSlotConfig.start=this.toMinutes("08:00"),this.timeSlotConfig.end=this.toMinutes("16:00"),this.timeSlotConfig.durationInHours=1,this.timeSlotConfig.timeSlotNotAvailableHours=["12:00","17:00"],this.timeSlotConfig.dayOfWeekNotAvailable=[],yield this.initTimeSlot()})}onBack(){"1"!==this.formData.reservationTypeId&&"2"!==this.formData.reservationTypeId||3!==this.reservationStepper.selectedIndex?"3"===this.formData.reservationTypeId&&2===this.reservationStepper.selectedIndex||"4"===this.formData.reservationTypeId&&3===this.reservationStepper.selectedIndex?this.reservationStepper.selectedIndex=0:this.reservationStepper.previous():this.reservationStepper.selectedIndex=1}cancel(){0!==this.reservationStepper.selectedIndex?this.onBack():(this.modal.canDismiss=!0,this.modalCtrl.dismiss(null,"cancel"))}save(){return(0,_.mG)(this,void 0,void 0,function*(){const o=this.formData;try{yield this.pageLoaderService.open("Booking reservation..."),this.isSubmitting=!0,this.reservationService.createReservation(o).subscribe(l=>(0,_.mG)(this,void 0,void 0,function*(){l.success?(yield this.presentAlert({header:"Booked!",buttons:["OK"]}),this.isSubmitting=!1,this.modal.canDismiss=!0,this.modal.dismiss({success:!0,data:l.data},"confirm"),yield this.pageLoaderService.close()):(yield this.pageLoaderService.close(),this.isSubmitting=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(l.message)?l.message[0]:l.message,buttons:["OK"]}))}),l=>(0,_.mG)(this,void 0,void 0,function*(){yield this.pageLoaderService.close(),this.isSubmitting=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(l.message)?l.message[0]:l.message,buttons:["OK"]})}))}catch(l){yield this.pageLoaderService.close(),this.isSubmitting=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(l.message)?l.message[0]:l.message,buttons:["OK"]})}})}timeSlotOptions(o=1){const l=this.timeSlotConfig.notAvailableHours,m=this.timeSlotConfig.start;return Array.from({length:Math.floor((this.timeSlotConfig.end-m)/(60*Number(o)))+1},(N,D)=>this.toString(m+D*(60*Number(o)))).filter(N=>!l.includes(N))}tConvert(o){if(!o.toLowerCase().includes("invalid date"))return(o=(o=o.split(":")[1].charAt(1)?o:o+"0").toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[o]).length>1&&((o=o.slice(1))[5]=+o[0]<12?" AM":" PM",o[0]=+o[0]%12||12),o.join("")}getReservationsForADay(o,l){return(0,_.mG)(this,void 0,void 0,function*(){console.log(l);try{this.isLoading=!0,yield this.reservationService.getReservationsForADay(o).subscribe(m=>(0,_.mG)(this,void 0,void 0,function*(){if(m.success){const O=m.data.map(C=>{const N=i(`${C.reservationDate} ${C.time}`).format("HH"),D=new Date(i(`${C.reservationDate} ${C.time}`).format("YYYY-MM-DD HH:mm"));return D.setHours(D.getHours()+this.timeSlotConfig.durationInHours),{reservationTimeStart:N,reservationTimeEnd:i(D).format("HH")}});this.availableTimeSlot=l.map(C=>{const N=C.split(":")[0];if(O.filter(D=>Number(N)>=Number(D.reservationTimeStart)&&Number(N)<Number(D.reservationTimeEnd)).length<=0)return C}).filter(C=>null!=C&&""!==C),this.isLoading=!1}else yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(m.message)?m.message[0]:m.message,buttons:["OK"]}),this.isLoading=!1}),m=>(0,_.mG)(this,void 0,void 0,function*(){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(m.message)?m.message[0]:m.message,buttons:["OK"]}),this.isLoading=!1}))}catch(m){console.log(m),yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(m.message)?m.message[0]:m.message,buttons:["OK"]})}})}presentAlert(o){return(0,_.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create(o)).present()})}}return c.\u0275fac=function(o){return new(o||c)(e.Y36(t.IN),e.Y36(y.qu),e.Y36(t.Br),e.Y36(U.D),e.Y36(t.BX),e.Y36(E.p),e.Y36(Z._),e.Y36(t.t4),e.Y36(n.H7))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-add-schedule"]],viewQuery:function(o,l){if(1&o&&(e.Gf(w,5),e.Gf(t.ki,5),e.Gf(q,7)),2&o){let m;e.iGM(m=e.CRH())&&(l.reservationStepper=m.first),e.iGM(m=e.CRH())&&(l.timeSlotModal=m.first),e.iGM(m=e.CRH())&&(l.selectTimeSlotDateCtrl=m.first)}},decls:118,vars:46,consts:[["slot","start"],[3,"click"],["name","chevron-back"],[2,"text-align","center"],["slot","end",2,"width","48px"],[3,"ngStyle"],[2,"display","flex","width","100%","padding","16px","align-items","center"],[2,"display","flex","width","100%"],["slot","end"],["id","open-modal-preview"],["name","chevron-down-circle"],[1,"ion-padding"],["animationDuration","200",3,"linear"],["reservationStepper",""],["label","",3,"stepControl"],["id","selectReservationTypeForm",3,"formGroup","ngSubmit"],[1,"form-field-group"],["formControlName","reservationTypeId"],["fill","outline","lines","none"],["slot","end","value","1",3,"disabled"],["slot","end","value","2",3,"disabled"],["slot","end","value","3",3,"disabled"],["slot","end","value","4",3,"disabled"],["class","error",4,"ngIf"],["id","selectMassCategoryForm",3,"formGroup","ngSubmit"],["formControlName","massCategoryId"],["id","selectMassIntensionTypeForm",3,"formGroup","ngSubmit"],["formControlName","massIntentionTypeId"],[3,"stepControl"],["id","selectTimeSlotForm",3,"formGroup","ngSubmit"],[3,"disabled"],["id","open-reservation-date-picker","fill","outline","lines","none",3,"disabled"],["trigger","open-reservation-date-picker",3,"cssClass"],["class","form-field-group",4,"ngIf","ngIfElse"],["elseLoadingTimeSlot",""],[4,"ngIf"],["id","remarksForm",3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","text","placeholder","Remarks","formControlName","remarks",2,"height","200px"],["trigger","open-modal-preview","animated","true","swipeToClose","true","showBackdrop","true","canDismiss","true","handle","true","handleBehavior","cycle","backdropDismiss","true",3,"initialBreakpoint","breakpoints"],["modal",""],[1,"sched-controls-bottom"],["color","primary","size","large","expand","block",3,"disabled","click",4,"ngIf"],["color","primary","size","large","expand","block","fill","outline",3,"click",4,"ngIf"],[1,"error"],["presentation","date","size","cover","formControlName","selectTimeSlotDate",3,"min","showDefaultButtons"],["selectTimeSlotDateCtrl",""],["formControlName","selectTime",3,"disabled",4,"ngIf"],["formControlName","selectTime",3,"disabled"],["fill","outline","lines","none",4,"ngFor","ngForOf"],["slot","end",3,"value"],[1,"no-time-slot-available"],[2,"color","rgba(0,0,0)!important","margin","20px 20px 0 20px!important","text-align","center"],["lines","none"],[2,"color","black"],["color","primary","size","large","expand","block",3,"disabled","click"],["color","primary","size","large","expand","block","fill","outline",3,"click"]],template:function(o,l){if(1&o){const m=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.NdJ("click",function(){return l.cancel()}),e._UZ(4,"ion-icon",2),e.qZA()(),e.TgZ(5,"ion-title",3),e._uU(6,"New Reservation"),e.qZA(),e._UZ(7,"div",4),e.qZA(),e.TgZ(8,"ion-toolbar",5)(9,"div",6)(10,"h3",0)(11,"strong"),e._uU(12,"Preview"),e.qZA()(),e._UZ(13,"div",7),e.TgZ(14,"ion-buttons",8)(15,"ion-button",9),e._UZ(16,"ion-icon",10),e.qZA()()()()(),e.TgZ(17,"ion-content",11)(18,"mat-stepper",12,13)(20,"mat-step",14)(21,"form",15),e.NdJ("ngSubmit",function(){e.CHM(m);const C=e.MAs(19);return e.KtG(!!l.selectReservationTypeForm.valid&&C.next())}),e.TgZ(22,"fieldset")(23,"div",16)(24,"mat-label"),e._uU(25,"Select reservation type"),e.qZA(),e.TgZ(26,"ion-radio-group",17)(27,"ion-item",18)(28,"ion-label"),e._uU(29,"Baptism"),e.qZA(),e._UZ(30,"ion-radio",19),e.qZA(),e.TgZ(31,"ion-item",18)(32,"ion-label"),e._uU(33,"Wedding"),e.qZA(),e._UZ(34,"ion-radio",20),e.qZA(),e.TgZ(35,"ion-item",18)(36,"ion-label"),e._uU(37,"Mass intentions"),e.qZA(),e._UZ(38,"ion-radio",21),e.qZA(),e.TgZ(39,"ion-item",18)(40,"ion-label"),e._uU(41,"Funeral mass"),e.qZA(),e._UZ(42,"ion-radio",22),e.qZA()(),e.YNc(43,v,2,0,"span",23),e.qZA()()()(),e.TgZ(44,"mat-step",14)(45,"form",24),e.NdJ("ngSubmit",function(){e.CHM(m);const C=e.MAs(19);return e.KtG(!!l.selectMassCategoryForm.valid&&C.next())}),e.TgZ(46,"fieldset")(47,"div",16)(48,"mat-label"),e._uU(49,"Select mass category"),e.qZA(),e.TgZ(50,"ion-radio-group",25)(51,"ion-item",18)(52,"ion-label"),e._uU(53,"Special"),e.qZA(),e._UZ(54,"ion-radio",19),e.qZA(),e.TgZ(55,"ion-item",18)(56,"ion-label"),e._uU(57,"Common"),e.qZA(),e._UZ(58,"ion-radio",20),e.qZA()(),e.YNc(59,b,2,0,"span",23),e.qZA()()()(),e.TgZ(60,"mat-step",14)(61,"form",26),e.NdJ("ngSubmit",function(){e.CHM(m);const C=e.MAs(19);return e.KtG(!!l.selectMassIntensionTypeForm.valid&&C.next())}),e.TgZ(62,"fieldset")(63,"div",16)(64,"mat-label"),e._uU(65,"Select mass intention type"),e.qZA(),e.TgZ(66,"ion-radio-group",27)(67,"ion-item",18)(68,"ion-label"),e._uU(69,"Pamisa Pasalamat"),e.qZA(),e._UZ(70,"ion-radio",19),e.qZA(),e.TgZ(71,"ion-item",18)(72,"ion-label"),e._uU(73,"Pamisa sa Birthday"),e.qZA(),e._UZ(74,"ion-radio",20),e.qZA(),e.TgZ(75,"ion-item",18)(76,"ion-label"),e._uU(77,"House Blessing"),e.qZA(),e._UZ(78,"ion-radio",21),e.qZA(),e.TgZ(79,"ion-item",18)(80,"ion-label"),e._uU(81,"Pamisa sa Kalag"),e.qZA(),e._UZ(82,"ion-radio",22),e.qZA()(),e.YNc(83,a,2,0,"span",23),e.qZA()()()(),e.TgZ(84,"mat-step",28)(85,"form",29),e.NdJ("ngSubmit",function(){e.CHM(m);const C=e.MAs(19);return e.KtG(!!l.selectTimeSlotForm.valid&&C.next())}),e.TgZ(86,"fieldset",30)(87,"div",16)(88,"mat-label",0),e._uU(89,"Select reservation date"),e.qZA(),e.TgZ(90,"ion-item",31)(91,"ion-label"),e._uU(92),e.ALo(93,"date"),e.qZA()(),e.TgZ(94,"ion-modal",32),e.YNc(95,h,2,2,"ng-template"),e.qZA()(),e.YNc(96,L,3,2,"div",33),e.YNc(97,Y,3,0,"ng-template",null,34,e.W1O),e.YNc(99,k,8,0,"ng-container",35),e.qZA()()(),e.TgZ(100,"mat-step",28)(101,"form",36),e.NdJ("ngSubmit",function(){e.CHM(m);const C=e.MAs(19);return e.KtG(!!l.remarksForm.valid&&C.next())}),e.TgZ(102,"fieldset")(103,"div",16)(104,"mat-form-field",37)(105,"mat-label"),e._uU(106,"Remarks(Optional)"),e.qZA(),e._UZ(107,"textarea",38),e.qZA()()()()()(),e.TgZ(108,"ion-modal",39,40),e.YNc(110,ee,11,5,"ng-template"),e.qZA()(),e.TgZ(111,"div",41),e.YNc(112,z,2,1,"ion-button",42),e.YNc(113,j,2,1,"ion-button",42),e.YNc(114,$,2,1,"ion-button",42),e.YNc(115,X,2,1,"ion-button",42),e.YNc(116,V,2,1,"ion-button",42),e.YNc(117,u,2,0,"ion-button",43),e.qZA()}if(2&o){const m=e.MAs(19),O=e.MAs(98);e.xp6(8),e.Q6J("ngStyle",e.VKq(43,M,l.previewData.reservationType&&""!==l.previewData.reservationType?"":"none")),e.xp6(10),e.Q6J("linear",!1),e.xp6(2),e.Q6J("stepControl",l.selectReservationTypeForm),e.xp6(1),e.Q6J("formGroup",l.selectReservationTypeForm),e.xp6(9),e.Q6J("disabled",l.isLoading),e.xp6(4),e.Q6J("disabled",l.isLoading),e.xp6(4),e.Q6J("disabled",l.isLoading),e.xp6(4),e.Q6J("disabled",l.isLoading),e.xp6(1),e.Q6J("ngIf",l.errorControls.reservationTypeId.touched&&l.errorControls.reservationTypeId.errors&&l.errorControls.reservationTypeId.errors.required),e.xp6(1),e.Q6J("stepControl",l.selectMassCategoryForm),e.xp6(1),e.Q6J("formGroup",l.selectMassCategoryForm),e.xp6(9),e.Q6J("disabled",l.isLoading),e.xp6(4),e.Q6J("disabled",l.isLoading),e.xp6(1),e.Q6J("ngIf",l.errorControls.massCategoryId.touched&&l.errorControls.massCategoryId.errors&&l.errorControls.massCategoryId.errors.required),e.xp6(1),e.Q6J("stepControl",l.selectMassIntensionTypeForm),e.xp6(1),e.Q6J("formGroup",l.selectMassIntensionTypeForm),e.xp6(9),e.Q6J("disabled",l.isLoading),e.xp6(4),e.Q6J("disabled",l.isLoading),e.xp6(4),e.Q6J("disabled",l.isLoading),e.xp6(4),e.Q6J("disabled",l.isLoading),e.xp6(1),e.Q6J("ngIf",l.errorControls.massIntentionTypeId.touched&&l.errorControls.massIntentionTypeId.errors&&l.errorControls.massIntentionTypeId.errors.required),e.xp6(1),e.Q6J("stepControl",l.selectTimeSlotForm),e.xp6(1),e.Q6J("formGroup",l.selectTimeSlotForm),e.xp6(1),e.Q6J("disabled",l.isSubmitting||l.isLoading),e.xp6(4),e.Q6J("disabled",l.isLoading),e.xp6(2),e.Oqu(e.xi3(93,40,l.formData.reservationDate,"EEEE, MMMM d, y")),e.xp6(2),e.Q6J("cssClass","bottom-end"),e.xp6(2),e.Q6J("ngIf",!l.isLoading)("ngIfElse",O),e.xp6(3),e.Q6J("ngIf",!l.isLoading&&l.availableTimeSlot.length<=0),e.xp6(1),e.Q6J("stepControl",l.remarksForm),e.xp6(1),e.Q6J("formGroup",l.remarksForm),e.xp6(7),e.Q6J("initialBreakpoint",.5)("breakpoints",e.DdM(45,d)),e.xp6(4),e.Q6J("ngIf",0===m.selectedIndex),e.xp6(1),e.Q6J("ngIf",1===m.selectedIndex),e.xp6(1),e.Q6J("ngIf",2===m.selectedIndex),e.xp6(1),e.Q6J("ngIf",3===m.selectedIndex),e.xp6(1),e.Q6J("ngIf",4===m.selectedIndex),e.xp6(1),e.Q6J("ngIf",m.selectedIndex>0&&m.selectedIndex<=4)}},dependencies:[x.sg,x.O5,x.PC,y._Y,y.Fj,y.JJ,y.JL,y.sg,y.u,t.YG,t.Sm,t.W2,t.x4,t.Gu,t.gu,t.Ie,t.Q$,t.q_,t.B7,t.se,t.wd,t.sr,t.ki,t.U5,t.QI,A.C0,A.Vq,S.KE,S.hX,J.Nt,x.uU],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%], span[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin:0!important}.sched-controls-bottom[_ngcontent-%COMP%]{position:relative;display:block;width:100%;background:#ffffff;padding:5px 10px;box-shadow:0 3px 10px #0003}.sched-controls-bottom[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:45px;font-size:15px}  mat-stepper .mat-horizontal-stepper-header-container{display:none!important}  mat-stepper .mat-horizontal-content-container{padding:0!important}ion-radio-group.hide-radio-controls[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{visibility:hidden!important}#selectTimeSlotForm[_ngcontent-%COMP%]{display:flex!important;height:100%}#selectTimeSlotForm[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{flex-grow:1;display:flex!important}#selectTimeSlotForm[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .form-field-group[_ngcontent-%COMP%]{flex-grow:0!important}#selectTimeSlotForm[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .no-time-slot-available[_ngcontent-%COMP%]{flex-grow:1;display:flex!important;flex-direction:column;align-items:center;text-align:center;justify-content:center}.photos[_ngcontent-%COMP%]{row-gap:10px;display:flex;flex-direction:column;box-sizing:border-box;width:100%;padding:10px}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:auto}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{position:absolute;right:30px;width:40px;height:40px}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;border-radius:10px;object-position:center;object-fit:contain;box-shadow:0 0 10px #7a7a7a75}"]}),c})()},8088:(R,I,r)=>{r.d(I,{k:()=>b});var _=r(655),y=r(5439),i=r(5e3),f=r(8779),e=r(7956),U=r(3746),E=r(8386),Z=r(9709),n=r(2669),x=r(9808),A=r(8559);function S(a,h){if(1&a&&(i.TgZ(0,"ion-item",11)(1,"ion-label",12)(2,"div",17)(3,"h1",13),i._uU(4),i.qZA(),i.TgZ(5,"h3",14),i._uU(6,"Mass Category"),i.qZA()()()()),2&a){const s=i.oxw(2);i.xp6(4),i.Oqu(s.details.massCategory.name)}}function J(a,h){if(1&a&&(i.TgZ(0,"ion-item",11)(1,"ion-label",12)(2,"div",17)(3,"h1",13),i._uU(4),i.qZA(),i.TgZ(5,"h3",14),i._uU(6,"Mass Intention Type"),i.qZA()()()()),2&a){const s=i.oxw(2);i.xp6(4),i.Oqu(s.details.massIntentionType.name)}}function w(a,h){if(1&a&&(i.TgZ(0,"div",10)(1,"ion-item",11)(2,"ion-label",12)(3,"div",11)(4,"h2",13),i._uU(5,"# "),i.TgZ(6,"strong"),i._uU(7),i.ALo(8,"numberLeadZero"),i.qZA()()()()(),i.TgZ(9,"ion-item",11)(10,"ion-label",12)(11,"h3",14)(12,"strong")(13,"ion-text",15),i._uU(14),i.qZA()()(),i.TgZ(15,"h3",16),i._uU(16,"Status"),i.qZA()()(),i.TgZ(17,"ion-item",11)(18,"ion-label",12)(19,"div",17)(20,"h1",13),i._uU(21),i.qZA(),i.TgZ(22,"h3",14),i._uU(23,"Reservation Type"),i.qZA()()()(),i.YNc(24,S,7,1,"ion-item",18),i.YNc(25,J,7,1,"ion-item",18),i.TgZ(26,"ion-item",11),i._UZ(27,"ion-icon",19),i.TgZ(28,"ion-label",12)(29,"h3",14),i._uU(30),i.qZA(),i.TgZ(31,"h3",14),i._uU(32),i.qZA()()(),i.TgZ(33,"ion-item",11),i._UZ(34,"ion-icon",20),i.TgZ(35,"ion-label",12)(36,"h2",13),i._uU(37),i.qZA(),i.TgZ(38,"span",16),i._uU(39),i.qZA()()()()),2&a){const s=i.oxw();let g;i.xp6(7),i.Oqu(i.xi3(8,10,s.details.reservationId,5)),i.xp6(6),i.Q6J("color",("1"===s.details.reservationStatus.reservationStatusId||"4"===s.details.reservationStatus.reservationStatusId?"danger":"")||("2"===s.details.reservationStatus.reservationStatusId?"primary":"")||(null!==(g="3"===s.details.reservationStatus.reservationStatusId)&&void 0!==g?g:"tertiary")),i.xp6(1),i.hij(" ",s.details.reservationStatus.name," "),i.xp6(7),i.Oqu(s.details.reservationType.name),i.xp6(3),i.Q6J("ngIf","1"===s.details.reservationType.reservationTypeId||"2"!==s.details.reservationType.reservationTypeId),i.xp6(1),i.Q6J("ngIf","3"===s.details.reservationType.reservationTypeId),i.xp6(5),i.Oqu(s.reservationDate),i.xp6(2),i.Oqu(s.time),i.xp6(5),i.Oqu(s.details.remarks),i.xp6(2),i.Oqu(""!==s.details.remarks?"Remarks":"No Remarks")}}function q(a,h){1&a&&(i.TgZ(0,"div",10)(1,"ion-item",11)(2,"ion-label",12)(3,"h3",14)(4,"strong")(5,"ion-text"),i._UZ(6,"ion-skeleton-text",21),i.qZA()()(),i.TgZ(7,"h3",16),i._UZ(8,"ion-skeleton-text",21),i.qZA()()(),i.TgZ(9,"ion-item",11)(10,"ion-label",12)(11,"div",17)(12,"h1",13),i._UZ(13,"ion-skeleton-text",21),i.qZA(),i.TgZ(14,"h3",14),i._UZ(15,"ion-skeleton-text",21),i.qZA()()()(),i.TgZ(16,"ion-item",11),i._UZ(17,"ion-icon",19),i.TgZ(18,"ion-label",12)(19,"h3",14),i._UZ(20,"ion-skeleton-text",21),i.qZA(),i.TgZ(21,"h3",14),i._UZ(22,"ion-skeleton-text",21),i.qZA()()(),i.TgZ(23,"ion-item",11),i._UZ(24,"ion-icon",22),i.TgZ(25,"ion-label",12)(26,"h3",14),i._UZ(27,"ion-skeleton-text",21),i.qZA()()(),i.TgZ(28,"ion-item",11),i._UZ(29,"ion-icon",23),i.TgZ(30,"ion-label",12)(31,"h2",13),i._UZ(32,"ion-skeleton-text",21),i.qZA(),i.TgZ(33,"span",16),i._UZ(34,"ion-skeleton-text",21),i.qZA()()()()),2&a&&(i.xp6(6),i.Q6J("animated",!0),i.xp6(2),i.Q6J("animated",!0),i.xp6(5),i.Q6J("animated",!0),i.xp6(2),i.Q6J("animated",!0),i.xp6(5),i.Q6J("animated",!0),i.xp6(2),i.Q6J("animated",!0),i.xp6(5),i.Q6J("animated",!0),i.xp6(5),i.Q6J("animated",!0),i.xp6(2),i.Q6J("animated",!0))}function v(a,h){if(1&a){const s=i.EpF();i.TgZ(0,"ion-button",24),i.NdJ("click",function(){i.CHM(s);const P=i.oxw();return i.KtG(P.onCancelReservation())}),i._uU(1,"Cancel reservation"),i.qZA()}if(2&a){const s=i.oxw();i.Q6J("disabled",s.isLoading)}}let b=(()=>{class a{constructor(s,g,P,L,Y,k,Q,F,B){this.modalCtrl=s,this.alertController=g,this.actionSheetController=P,this.platform=L,this.pageLoaderService=Y,this.storageService=k,this.userService=Q,this.appconfig=F,this.reservationService=B,this.hasChanges=!1,this.isLoading=!1,this.details={},this.platform.backButton.subscribeWithPriority(-1,()=>{this.cancel()})}get reservationDate(){return y(this.details.reservationDate).format("dddd, MMM DD, YYYY")}get time(){return y(`${this.details.reservationDate} ${this.details.time}`).format("h:mm a")}ngOnInit(){this.getReservation(this.details.reservationId)}getReservation(s){return(0,_.mG)(this,void 0,void 0,function*(){try{this.isLoading=!0,this.reservationService.getById(s).subscribe(g=>(0,_.mG)(this,void 0,void 0,function*(){g.success?(this.details=g.data,this.isLoading=!1):yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(g.message)?g.message[0]:g.message,buttons:["OK"]})}),g=>(0,_.mG)(this,void 0,void 0,function*(){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(g.message)?g.message[0]:g.message,buttons:["OK"]}),this.isLoading=!1}))}catch(g){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(g.message)?g.message[0]:g.message,buttons:["OK"]})}})}onCancelReservation(){return(0,_.mG)(this,void 0,void 0,function*(){yield this.presentAlert({header:"Are you sure you want to cancel?",buttons:[{text:"BACK",role:"cancel"},{text:"YES",role:"confirm",handler:()=>(0,_.mG)(this,void 0,void 0,function*(){this.cancelReservation()})}]})})}cancelReservation(){return(0,_.mG)(this,void 0,void 0,function*(){try{yield this.pageLoaderService.open("Processing please wait..."),this.isLoading=!0,this.reservationService.updateReservationStatus({reservationId:this.details.reservationId,reservationStatusId:"4"}).subscribe(s=>(0,_.mG)(this,void 0,void 0,function*(){if(s.success)return this.hasChanges=!0,yield this.pageLoaderService.close(),yield this.presentAlert({header:"Reservation cancelled!",buttons:["OK"]}),this.isLoading=!1,this.modalCtrl.dismiss(!0,"confirm");yield this.pageLoaderService.close(),this.isLoading=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(s.message)?s.message[0]:s.message,buttons:["OK"]})}),s=>(0,_.mG)(this,void 0,void 0,function*(){yield this.pageLoaderService.close(),this.isLoading=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(s.message)?s.message[0]:s.message,buttons:["OK"]})}))}catch(s){yield this.pageLoaderService.close(),this.isLoading=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(s.message)?s.message[0]:s.message,buttons:["OK"]})}})}cancel(){return this.modalCtrl.dismiss(this.hasChanges?this.hasChanges:null,"cancel")}presentAlert(s){return(0,_.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create(s)).present()})}}return a.\u0275fac=function(s){return new(s||a)(i.Y36(f.IN),i.Y36(f.Br),i.Y36(f.BX),i.Y36(f.t4),i.Y36(e.p),i.Y36(U.V),i.Y36(E.K),i.Y36(Z._),i.Y36(n.D))},a.\u0275cmp=i.Xpm({type:a,selectors:[["app-schedule-details"]],decls:14,vars:4,consts:[["slot","start"],[3,"disabled","click"],["name","chevron-back"],[2,"text-align","center"],["slot","end",2,"width","48px"],[1,"ion-padding"],["class","details-container",4,"ngIf","ngIfElse"],["loading",""],[1,"sched-controls-bottom"],["color","danger","expand","block","fill","outline",3,"disabled","click",4,"ngIf"],[1,"details-container"],[1,"item"],["text-wrap",""],[1,"title"],[1,"sub"],[3,"color"],[1,"desc"],[1,"item","type"],["class","item",4,"ngIf"],["name","today","slot","start"],["name","pricetag","slot","start"],[3,"animated"],["name","location","slot","start"],["name","medkit","slot","start"],["color","danger","expand","block","fill","outline",3,"disabled","click"]],template:function(s,g){if(1&s&&(i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),i.NdJ("click",function(){return g.cancel()}),i._UZ(4,"ion-icon",2),i.qZA()(),i.TgZ(5,"ion-title",3),i._uU(6,"Details"),i.qZA(),i._UZ(7,"div",4),i.qZA()(),i.TgZ(8,"ion-content",5),i.YNc(9,w,40,13,"div",6),i.YNc(10,q,35,9,"ng-template",null,7,i.W1O),i.qZA(),i.TgZ(12,"div",8),i.YNc(13,v,2,1,"ion-button",9),i.qZA()),2&s){const P=i.MAs(11);i.xp6(3),i.Q6J("disabled",g.isLoading),i.xp6(6),i.Q6J("ngIf",!g.isLoading)("ngIfElse",P),i.xp6(4),i.Q6J("ngIf","1"===g.details.reservationStatus.reservationStatusId)}},dependencies:[x.O5,f.YG,f.Sm,f.W2,f.Gu,f.gu,f.Ie,f.Q$,f.CK,f.yW,f.wd,f.sr,A.O],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}.message-header-button[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{position:absolute;z-index:9;top:0;right:-10px;font-size:12px}.video-conference-button.disabled[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#0003!important}.video-conference-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#26a69a}.details-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:#000!important;display:flex;flex-direction:column}.details-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .details-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{margin:5px 0!important}.details-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{color:#999!important}.details-container[_ngcontent-%COMP%]   .item.type[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:500}.sched-controls-bottom[_ngcontent-%COMP%]{position:relative;display:block;width:100%;background:#ffffff;padding:5px 10px;box-shadow:0 3px 10px #0003}.sched-controls-bottom[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:45px;font-size:15px}.photos[_ngcontent-%COMP%]{row-gap:10px;display:flex;flex-direction:column;box-sizing:border-box;width:100%;padding:10px}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:auto}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;border-radius:10px;object-position:center;object-fit:contain;box-shadow:0 0 10px #7a7a7a75}"]}),a})()},8365:(R,I,r)=>{r.d(I,{O:()=>q});var _=r(655),y=r(8088),t=r(5e3),i=r(8779),f=r(2669),e=r(9808),U=r(8559);function E(v,b){if(1&v){const a=t.EpF();t.TgZ(0,"ion-refresher",10),t.NdJ("ionRefresh",function(s){t.CHM(a);const g=t.oxw();return t.KtG(g.doRefresh(s))}),t._UZ(1,"ion-refresher-content"),t.qZA()}}function Z(v,b){if(1&v&&(t.TgZ(0,"p",15),t._uU(1),t.qZA()),2&v){const a=t.oxw().$implicit;t.xp6(1),t.hij("",a.massCategory.name," ")}}function n(v,b){if(1&v&&(t.TgZ(0,"p",15),t._uU(1),t.qZA()),2&v){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a.massIntentionType.name)}}function x(v,b){if(1&v){const a=t.EpF();t.TgZ(0,"ion-item",12),t.NdJ("click",function(){const g=t.CHM(a).$implicit,P=t.oxw(3);return t.KtG(P.onOpenDetails(g))}),t.TgZ(1,"ion-label")(2,"div")(3,"h3")(4,"strong"),t._uU(5),t.ALo(6,"numberLeadZero"),t.TgZ(7,"ion-text",13),t._uU(8),t.qZA()()(),t.TgZ(9,"p")(10,"strong"),t._uU(11),t.qZA()(),t.YNc(12,Z,2,1,"p",14),t.YNc(13,n,2,1,"p",14),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"date"),t.ALo(17,"date"),t.qZA()()()()}if(2&v){const a=b.$implicit;let h;t.xp6(5),t.hij("ID #: ",t.xi3(6,8,a.reservationId,5)," "),t.xp6(2),t.Q6J("color",("1"===a.reservationStatus.reservationStatusId||"4"===a.reservationStatus.reservationStatusId?"danger":"")||("2"===a.reservationStatus.reservationStatusId?"primary":"")||(null!==(h="3"===a.reservationStatus.reservationStatusId)&&void 0!==h?h:"tertiary")),t.xp6(1),t.hij(" ",a.reservationStatus.name," "),t.xp6(3),t.Oqu(a.reservationType.name),t.xp6(1),t.Q6J("ngIf","1"===a.reservationType.reservationTypeId||"2"===a.reservationType.reservationTypeId),t.xp6(1),t.Q6J("ngIf","3"===a.reservationType.reservationTypeId),t.xp6(2),t.AsE("",t.xi3(16,11,a.reservationDate,"MMMM dd, yyyy")," ",t.xi3(17,14,a.reservationDate+" "+a.time,"hh:mm a"),"")}}function A(v,b){if(1&v&&(t.TgZ(0,"ion-list"),t.YNc(1,x,18,17,"ion-item",11),t.qZA()),2&v){const a=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",a.reservation)}}function S(v,b){if(1&v&&(t.TgZ(0,"div"),t.YNc(1,A,2,1,"ion-list",7),t.qZA()),2&v){const a=t.oxw(),h=t.MAs(14);t.xp6(1),t.Q6J("ngIf",a.reservation.length>0)("ngIfElse",h)}}function J(v,b){1&v&&(t.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"div")(4,"h3",16),t._UZ(5,"ion-skeleton-text",17),t.qZA(),t.TgZ(6,"p"),t._UZ(7,"ion-skeleton-text",17),t.qZA(),t.TgZ(8,"p",18),t._UZ(9,"ion-skeleton-text",17),t.qZA()()()()()),2&v&&(t.xp6(5),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0))}function w(v,b){1&v&&(t.TgZ(0,"div",19),t._UZ(1,"ion-icon",20),t.TgZ(2,"h3",21),t._uU(3,"No recent reservations to show"),t.qZA()())}let q=(()=>{class v{constructor(a,h,s,g){this.actionSheetController=a,this.modalCtrl=h,this.alertController=s,this.reservationService=g,this.isLoading=!1,this.reservation=[],this.message="",this.currentPage=1,this.limit=10,this.totalUnreadNotification=0}ngOnInit(){this.initHistory(this.currentUser.clientId)}initHistory(a){return(0,_.mG)(this,void 0,void 0,function*(){try{this.isLoading=!0,this.reservationService.getByStatus({clientId:a,reservationStatus:"Completed,Cancelled"}).subscribe(h=>(0,_.mG)(this,void 0,void 0,function*(){h.success?(this.reservation=h.data,this.refreshEvent&&(this.refreshEvent.target.complete(),this.refreshEvent=null),this.isLoading=!1):yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(h.message)?h.message[0]:h.message,buttons:["OK"]})}),h=>(0,_.mG)(this,void 0,void 0,function*(){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(h.message)?h.message[0]:h.message,buttons:["OK"]}),this.isLoading=!1}))}catch(h){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(h.message)?h.message[0]:h.message,buttons:["OK"]})}})}onOpenDetails(a){return(0,_.mG)(this,void 0,void 0,function*(){const h=yield this.modalCtrl.create({component:y.k,cssClass:"modal-fullscreen",componentProps:{details:a,currentUser:this.currentUser}});h.present(),yield h.onWillDismiss()})}loadMore(){return(0,_.mG)(this,void 0,void 0,function*(){this.currentPage=this.currentPage+1,this.initHistory(this.currentUser.clientId)})}doRefresh(a){return(0,_.mG)(this,void 0,void 0,function*(){this.reservation=[],this.currentPage=1,this.refreshEvent=a,this.initHistory(this.currentUser.clientId)})}cancel(){return this.modalCtrl.dismiss(null,"cancel")}presentAlert(a){return(0,_.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create(a)).present()})}}return v.\u0275fac=function(a){return new(a||v)(t.Y36(i.BX),t.Y36(i.IN),t.Y36(i.Br),t.Y36(f.D))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-schedule-history"]],decls:15,vars:4,consts:[["no-border","","no-shadow",""],["slot","start"],[3,"disabled","click"],["name","chevron-back"],[2,"text-align","center"],["slot","end",2,"width","48px"],["slot","fixed","class","refresher-custom",3,"ionRefresh",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseLoading",""],["elseNoData",""],["slot","fixed",1,"refresher-custom",3,"ionRefresh"],["button","","detail","true",3,"click",4,"ngFor","ngForOf"],["button","","detail","true",3,"click"],[3,"color"],["class","value",4,"ngIf"],[1,"value"],[1,"title",2,"width","50%"],[3,"animated"],[2,"width","40%"],[1,"no-records"],["name","search-outline",2,"font-size","4em"],[1,"text"]],template:function(a,h){if(1&a&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),t.NdJ("click",function(){return h.cancel()}),t._UZ(4,"ion-icon",3),t.qZA()(),t.TgZ(5,"ion-title",4),t._uU(6,"History"),t.qZA(),t._UZ(7,"div",5),t.qZA()(),t.TgZ(8,"ion-content"),t.YNc(9,E,2,0,"ion-refresher",6),t.YNc(10,S,2,2,"div",7),t.YNc(11,J,10,3,"ng-template",null,8,t.W1O),t.YNc(13,w,4,0,"ng-template",null,9,t.W1O),t.qZA()),2&a){const s=t.MAs(12);t.xp6(3),t.Q6J("disabled",h.isLoading),t.xp6(6),t.Q6J("ngIf",!h.isLoading),t.xp6(1),t.Q6J("ngIf",!h.isLoading)("ngIfElse",s)}},dependencies:[e.sg,e.O5,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.nJ,i.Wo,i.CK,i.yW,i.wd,i.sr,e.uU,U.O],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}ion-item[_ngcontent-%COMP%]{background:rgba(204,204,204,.8)!important}ion-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:rgba(204,204,204,.8)!important}ion-label[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0!important}.no-records[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:50px}  ion-item .un-read .title{font-weight:800px!important}"]}),v})()},2266:(R,I,r)=>{r.d(I,{W:()=>b});var _=r(655),y=r(8088),t=r(5e3),i=r(8779),f=r(2669),e=r(9808),U=r(8559);function E(a,h){if(1&a){const s=t.EpF();t.TgZ(0,"ion-refresher",10),t.NdJ("ionRefresh",function(P){t.CHM(s);const L=t.oxw();return t.KtG(L.doRefresh(P))}),t._UZ(1,"ion-refresher-content"),t.qZA()}}function Z(a,h){if(1&a&&(t.TgZ(0,"h3",20),t._uU(1),t.qZA()),2&a){const s=t.oxw().$implicit;t.xp6(1),t.Oqu(s.massCategory.name)}}function n(a,h){if(1&a&&(t.TgZ(0,"h3",20),t._uU(1),t.qZA()),2&a){const s=t.oxw().$implicit;t.xp6(1),t.Oqu(s.massIntentionType.name)}}function x(a,h){if(1&a){const s=t.EpF();t.TgZ(0,"div")(1,"ion-card",13)(2,"div",14)(3,"div",15)(4,"span"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"h2",16),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"span")(11,"strong"),t._uU(12),t.ALo(13,"date"),t.qZA()(),t.TgZ(14,"span"),t._uU(15),t.ALo(16,"date"),t.qZA()(),t.TgZ(17,"div",17)(18,"div",18)(19,"div",19)(20,"h3",20)(21,"strong"),t._uU(22),t.ALo(23,"numberLeadZero"),t.qZA()()()(),t.TgZ(24,"div",21)(25,"div",22)(26,"ion-buttons",23)(27,"ion-button",24),t.NdJ("click",function(){const L=t.CHM(s).$implicit,Y=t.oxw(3);return t.KtG(Y.showMenu(L))}),t._UZ(28,"ion-icon",25),t.qZA()()()(),t.TgZ(29,"div",21)(30,"div",26)(31,"h3"),t._uU(32,"Type"),t.qZA(),t.TgZ(33,"h3",20)(34,"strong"),t._uU(35),t.qZA()()()(),t.TgZ(36,"div",21)(37,"div",26),t.YNc(38,Z,2,1,"h3",27),t.YNc(39,n,2,1,"h3",27),t.qZA()()()()()()}if(2&a){const s=h.$implicit;t.xp6(5),t.Oqu(t.xi3(6,8,s.reservationDate,"MMMM")),t.xp6(3),t.Oqu(t.xi3(9,11,s.reservationDate,"dd")),t.xp6(4),t.Oqu(t.xi3(13,14,s.reservationDate+" "+s.time,"hh:mm a")),t.xp6(3),t.Oqu(t.xi3(16,17,s.reservationDate,"EEEE")),t.xp6(7),t.hij("ID #: ",t.xi3(23,20,s.reservationId,5),""),t.xp6(13),t.Oqu(s.reservationType.name),t.xp6(3),t.Q6J("ngIf","1"===s.reservationType.reservationTypeId||"2"!==s.reservationType.reservationTypeId),t.xp6(1),t.Q6J("ngIf","3"===s.reservationType.reservationTypeId)}}function A(a,h){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,x,40,23,"div",12),t.qZA()),2&a){const s=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",s.reservation)}}function S(a,h){1&a&&(t.TgZ(0,"div",28),t._UZ(1,"ion-icon",29),t.TgZ(2,"h3",30),t._uU(3,"No pending reservation to show"),t.qZA()())}function J(a,h){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,A,2,1,"div",8),t.YNc(2,S,4,0,"ng-template",null,11,t.W1O),t.qZA()),2&a){const s=t.MAs(3),g=t.oxw();t.xp6(1),t.Q6J("ngIf",g.reservation.length>0)("ngIfElse",s)}}function w(a,h){1&a&&(t.TgZ(0,"div")(1,"ion-card",13)(2,"div",14)(3,"div",31)(4,"span",32),t._UZ(5,"ion-skeleton-text",33),t.qZA(),t.TgZ(6,"h2",34),t._UZ(7,"ion-skeleton-text",33),t.qZA(),t.TgZ(8,"span",32),t._UZ(9,"ion-skeleton-text",33),t.qZA(),t.TgZ(10,"span",32),t._UZ(11,"ion-skeleton-text",33),t.qZA()(),t.TgZ(12,"div",17)(13,"div",18)(14,"div",35)(15,"h3",20),t._UZ(16,"ion-skeleton-text",33),t.qZA()()(),t.TgZ(17,"div",21)(18,"div",36)(19,"h3",20),t._UZ(20,"ion-skeleton-text",33),t.qZA()()()()()()()),2&a&&(t.xp6(5),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0),t.xp6(5),t.Q6J("animated",!0),t.xp6(4),t.Q6J("animated",!0))}const q=function(){return[1]};function v(a,h){1&a&&(t.TgZ(0,"div"),t.YNc(1,w,21,6,"div",12),t.qZA()),2&a&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,q)))}let b=(()=>{class a{constructor(s,g,P,L){this.actionSheetController=s,this.modalCtrl=g,this.alertController=P,this.reservationService=L,this.hasChanges=!1,this.isLoading=!1,this.reservation=[],this.message=""}ngOnInit(){this.getReservation(this.currentUser.clientId)}getReservation(s){return(0,_.mG)(this,void 0,void 0,function*(){try{this.isLoading=!0,this.reservationService.getByStatus({clientId:s,reservationStatus:"Pending"}).subscribe(g=>(0,_.mG)(this,void 0,void 0,function*(){g.success?(this.reservation=g.data,this.refreshEvent&&(this.refreshEvent.target.complete(),this.refreshEvent=null),this.isLoading=!1):yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(g.message)?g.message[0]:g.message,buttons:["OK"]})}),g=>(0,_.mG)(this,void 0,void 0,function*(){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(g.message)?g.message[0]:g.message,buttons:["OK"]}),this.isLoading=!1}))}catch(g){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(g.message)?g.message[0]:g.message,buttons:["OK"]})}})}doRefresh(s){return(0,_.mG)(this,void 0,void 0,function*(){this.refreshEvent=s,yield this.getReservation(this.currentUser.clientId)})}showMenu(s){return(0,_.mG)(this,void 0,void 0,function*(){const g=yield this.actionSheetController.create({cssClass:"sched-card-action-sheet",buttons:[{text:"Details",handler:()=>(0,_.mG)(this,void 0,void 0,function*(){this.onOpenDetails(s),g.dismiss()})},{text:"Back",handler:()=>(0,_.mG)(this,void 0,void 0,function*(){g.dismiss()})}]});yield g.present(),yield g.onDidDismiss()})}onOpenDetails(s){return(0,_.mG)(this,void 0,void 0,function*(){const g=yield this.modalCtrl.create({component:y.k,cssClass:"modal-fullscreen",componentProps:{details:s,currentUser:this.currentUser}});g.onWillDismiss().then(P=>{P.data&&(this.hasChanges=P.data,this.getReservation(this.currentUser.clientId))}),g.present(),yield g.onWillDismiss()})}cancel(){return this.modalCtrl.dismiss(this.hasChanges?this.hasChanges:null,"cancel")}presentAlert(s){return(0,_.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create(s)).present()})}}return a.\u0275fac=function(s){return new(s||a)(t.Y36(i.BX),t.Y36(i.IN),t.Y36(i.Br),t.Y36(f.D))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-schedule-pending"]],decls:13,vars:4,consts:[["no-border","","no-shadow",""],["slot","start"],[3,"disabled","click"],["name","chevron-back"],[2,"text-align","center"],["slot","end",2,"width","48px"],["fullscreen",""],["slot","fixed","class","refresher-custom",3,"ionRefresh",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseLoading",""],["slot","fixed",1,"refresher-custom",3,"ionRefresh"],["elseNoData",""],[4,"ngFor","ngForOf"],["mode","ios"],[1,"sched-card"],[1,"card-header"],[1,"date"],[1,"card-content"],[1,"content-row","border"],[1,"field"],[1,"value"],[1,"content-row"],[1,"field","action"],["slot","end"],[3,"click"],["name","ellipsis-vertical-sharp"],[1,"field","type"],["class","value",4,"ngIf"],[1,"no-records"],["name","search-outline",2,"font-size","4em"],[1,"text"],[1,"card-header",2,"width","90px!important"],[2,"width","100%!important"],[3,"animated"],[1,"date",2,"width","100%!important"],[1,"field","vet",2,"width","100%!important"],[1,"field","type",2,"width","100%!important"]],template:function(s,g){if(1&s&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),t.NdJ("click",function(){return g.cancel()}),t._UZ(4,"ion-icon",3),t.qZA()(),t.TgZ(5,"ion-title",4),t._uU(6,"Pending"),t.qZA(),t._UZ(7,"div",5),t.qZA()(),t.TgZ(8,"ion-content",6),t.YNc(9,E,2,0,"ion-refresher",7),t.YNc(10,J,4,2,"div",8),t.YNc(11,v,2,2,"ng-template",null,9,t.W1O),t.qZA()),2&s){const P=t.MAs(12);t.xp6(3),t.Q6J("disabled",g.isLoading),t.xp6(6),t.Q6J("ngIf",!g.isLoading),t.xp6(1),t.Q6J("ngIf",!g.isLoading)("ngIfElse",P)}},dependencies:[e.sg,e.O5,i.YG,i.Sm,i.PM,i.W2,i.Gu,i.gu,i.nJ,i.Wo,i.CK,i.wd,i.sr,e.uU,U.O],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:0!important}ion-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}  .mat-tab-group{height:100%;display:flex}  .mat-tab-group .mat-tab-labels{justify-content:space-around}  .mat-tab-group .mat-tab-body-wrapper{display:flex;flex-grow:1;height:100%}.sched-controls-bottom[_ngcontent-%COMP%]{position:relative;display:block;width:100%;background:#ffffff;padding:5px 10px}.sched-controls-bottom[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:45px;font-size:15px}.list-title[_ngcontent-%COMP%]{margin:10px 25px!important;display:flex}.sched-card[_ngcontent-%COMP%]{display:flex;padding:30px 20px}.sched-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-right:20px;border-right:1px solid #cccccc;justify-content:space-between}.sched-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;margin:0}.sched-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{display:flex;line-height:1;margin:0!important;font-size:60px;color:var(--ion-color-danger-tint)}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;padding-left:20px}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .field.action[_ngcontent-%COMP%]{width:45px!important;height:45px!important;position:absolute;right:3px;top:5px;display:flex}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .field.action[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{display:flex;flex-grow:1;min-width:45px!important}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .field.action[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex-grow:1;min-width:45px!important;--border-radius: 50%!important}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;display:-webkit-box;-webkit-box-orient:vertical;line-height:25px}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]{padding-top:15px!important;display:flex;flex-grow:1;flex-direction:row;justify-content:space-between}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .content-row.border[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:15px;border-bottom:1px solid #cccccc}"]}),a})()},325:(R,I,r)=>{r.r(I),r.d(I,{SchedulePageModule:()=>V});var _=r(9808),y=r(3075),t=r(8779),i=r(4132),f=r(655),e=r(6263),U=r(2266),E=r(8088),Z=r(8365),n=r(5e3),x=r(792),A=r(263),S=r(3746),J=r(8386),w=r(2669),q=r(9709),v=r(8559);function b(u,M){if(1&u){const d=n.EpF();n.TgZ(0,"ion-button",15),n.NdJ("click",function(){n.CHM(d);const c=n.oxw();return n.KtG(c.history())}),n._UZ(1,"ion-icon",16),n.qZA()}}function a(u,M){if(1&u){const d=n.EpF();n.TgZ(0,"ion-refresher",17),n.NdJ("ionRefresh",function(c){n.CHM(d);const T=n.oxw();return n.KtG(T.doRefresh(c))}),n._UZ(1,"ion-refresher-content"),n.qZA()}}function h(u,M){if(1&u){const d=n.EpF();n.TgZ(0,"ion-item",22),n.NdJ("click",function(){n.CHM(d);const c=n.oxw(2);return n.KtG(c.onOpenPending())}),n.TgZ(1,"ion-label")(2,"h2"),n._uU(3,"Pending"),n.qZA()(),n.TgZ(4,"ion-badge",23),n._uU(5),n.qZA()()}if(2&u){const d=n.oxw(2);n.xp6(5),n.Oqu(d.totalPending)}}function s(u,M){1&u&&(n.TgZ(0,"ion-item"),n._UZ(1,"ion-skeleton-text",24),n.qZA()),2&u&&(n.xp6(1),n.Q6J("animated",!0))}function g(u,M){if(1&u&&(n.TgZ(0,"div")(1,"ion-card",18)(2,"ion-list",19),n.YNc(3,h,6,1,"ion-item",20),n.YNc(4,s,2,1,"ng-template",null,21,n.W1O),n.qZA()()()),2&u){const d=n.MAs(5),p=n.oxw();n.xp6(3),n.Q6J("ngIf",!p.isLoading)("ngIfElse",d)}}function P(u,M){1&u&&(n.TgZ(0,"h2",25),n._uU(1,"Reservations"),n.qZA())}function L(u,M){if(1&u&&(n.TgZ(0,"h3",33),n._uU(1),n.qZA()),2&u){const d=n.oxw().$implicit;n.xp6(1),n.Oqu(d.massCategory.name)}}function Y(u,M){if(1&u&&(n.TgZ(0,"h3",33),n._uU(1),n.qZA()),2&u){const d=n.oxw().$implicit;n.xp6(1),n.Oqu(d.massIntentionType.name)}}function k(u,M){if(1&u){const d=n.EpF();n.TgZ(0,"div")(1,"ion-card",18)(2,"div",27)(3,"div",28)(4,"span"),n._uU(5),n.ALo(6,"date"),n.qZA(),n.TgZ(7,"h2",29),n._uU(8),n.ALo(9,"date"),n.qZA(),n.TgZ(10,"span")(11,"strong"),n._uU(12),n.ALo(13,"date"),n.qZA()(),n.TgZ(14,"span"),n._uU(15),n.ALo(16,"date"),n.qZA()(),n.TgZ(17,"div",30)(18,"div",31)(19,"div",32)(20,"h3",33)(21,"strong"),n._uU(22),n.ALo(23,"numberLeadZero"),n.qZA()()()(),n.TgZ(24,"div",34)(25,"div",35)(26,"ion-buttons",3)(27,"ion-button",15),n.NdJ("click",function(){const T=n.CHM(d).$implicit,o=n.oxw(2);return n.KtG(o.showMenu(T))}),n._UZ(28,"ion-icon",36),n.qZA()()()(),n.TgZ(29,"div",34)(30,"div",37)(31,"h3"),n._uU(32,"Type"),n.qZA(),n.TgZ(33,"h3",33)(34,"strong"),n._uU(35),n.qZA()()()(),n.TgZ(36,"div",34)(37,"div",37),n.YNc(38,L,2,1,"h3",38),n.YNc(39,Y,2,1,"h3",38),n.qZA()()()()()()}if(2&u){const d=M.$implicit;n.xp6(5),n.Oqu(n.xi3(6,8,d.reservationDate,"segmentChanged")),n.xp6(3),n.Oqu(n.xi3(9,11,d.reservationDate,"dd")),n.xp6(4),n.Oqu(n.xi3(13,14,d.reservationDate+" "+d.time,"hh:mm a")),n.xp6(3),n.Oqu(n.xi3(16,17,d.reservationDate,"EEEE")),n.xp6(7),n.hij("ID #: ",n.xi3(23,20,d.reservationId,5),""),n.xp6(13),n.Oqu(d.reservationType.name),n.xp6(3),n.Q6J("ngIf","1"===d.reservationType.reservationTypeId||"2"!==d.reservationType.reservationTypeId),n.xp6(1),n.Q6J("ngIf","3"===d.reservationType.reservationTypeId)}}function Q(u,M){if(1&u&&(n.TgZ(0,"div",8),n.YNc(1,k,40,23,"div",26),n.qZA()),2&u){const d=n.oxw();n.xp6(1),n.Q6J("ngForOf",d.reservation)}}function F(u,M){1&u&&(n.TgZ(0,"div",39),n._UZ(1,"ion-icon",40),n.TgZ(2,"h3",41),n._uU(3,"No reservations to show"),n.qZA()())}function B(u,M){1&u&&(n.TgZ(0,"div")(1,"ion-card",18)(2,"div",27)(3,"div",42)(4,"span",43),n._UZ(5,"ion-skeleton-text",24),n.qZA(),n.TgZ(6,"h2",44),n._UZ(7,"ion-skeleton-text",24),n.qZA(),n.TgZ(8,"span",43),n._UZ(9,"ion-skeleton-text",24),n.qZA(),n.TgZ(10,"span",43),n._UZ(11,"ion-skeleton-text",24),n.qZA()(),n.TgZ(12,"div",30)(13,"div",31)(14,"div",45)(15,"h3",33),n._UZ(16,"ion-skeleton-text",24),n.qZA()()(),n.TgZ(17,"div",34)(18,"div",46)(19,"h3",33),n._UZ(20,"ion-skeleton-text",24),n.qZA()()()()()()()),2&u&&(n.xp6(5),n.Q6J("animated",!0),n.xp6(2),n.Q6J("animated",!0),n.xp6(2),n.Q6J("animated",!0),n.xp6(2),n.Q6J("animated",!0),n.xp6(5),n.Q6J("animated",!0),n.xp6(4),n.Q6J("animated",!0))}const H=function(){return[1]};function G(u,M){1&u&&(n.TgZ(0,"div"),n.YNc(1,B,21,6,"div",26),n.qZA()),2&u&&(n.xp6(1),n.Q6J("ngForOf",n.DdM(1,H)))}const z=[{path:"",component:(()=>{class u{constructor(d,p,c,T,o,l,m,O,C,N,D,K){this.actionSheetController=d,this.modalCtrl=p,this.alertController=c,this.loaderService=T,this.authService=o,this.storageService=l,this.userService=m,this.reservationService=O,this.navController=C,this.router=N,this.appconfig=D,this.platform=K,this.selectedStatus=["Pending","Approved"],this.isLoading=!1,this.reservationData=[],this.message="",this.serviceTypeData=[],this.currentUser=this.storageService.getLoginUser(),this.isAuthenticated&&this.getReservation(this.currentUser.clientId)}get isAuthenticated(){const d=this.storageService.getLoginUser();return d&&d.clientId&&d.userId&&d.accessToken&&""!==d.clientId&&""!==d.userId&&""!==d.accessToken}get reservation(){return this.reservationData.filter(d=>"2"===d.reservationStatus.reservationStatusId)}get totalPending(){return this.reservationData.filter(d=>"1"===d.reservationStatus.reservationStatusId).length}ngOnInit(){return(0,f.mG)(this,void 0,void 0,function*(){})}ionViewWillEnter(){console.log("visited")}ionViewDidEnter(){this.subscription=this.platform.backButton.subscribeWithPriority(9999,()=>{document.addEventListener("backbutton",d=>{d.preventDefault(),d.stopPropagation(),d.stopImmediatePropagation()},!1)})}ionViewWillLeave(){this.subscription.unsubscribe()}getReservation(d){return(0,f.mG)(this,void 0,void 0,function*(){try{this.isLoading=!0,this.reservationService.getByStatus({clientId:d,reservationStatus:this.selectedStatus.toString()}).subscribe(p=>(0,f.mG)(this,void 0,void 0,function*(){p.success?(this.reservationData=p.data,this.refreshEvent&&(this.refreshEvent.target.complete(),this.refreshEvent=null),this.isLoading=!1):yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(p.message)?p.message[0]:p.message,buttons:["OK"]})}),p=>(0,f.mG)(this,void 0,void 0,function*(){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(p.message)?p.message[0]:p.message,buttons:["OK"]}),this.isLoading=!1}))}catch(p){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(p.message)?p.message[0]:p.message,buttons:["OK"]})}})}doRefresh(d){return(0,f.mG)(this,void 0,void 0,function*(){this.refreshEvent=d,yield this.getReservation(this.currentUser.clientId)})}showMenu(d){return(0,f.mG)(this,void 0,void 0,function*(){const p=yield this.actionSheetController.create({cssClass:"sched-card-action-sheet",buttons:[{text:"Details",handler:()=>(0,f.mG)(this,void 0,void 0,function*(){this.onOpenDetails(d),p.dismiss()})},{text:"Back",handler:()=>(0,f.mG)(this,void 0,void 0,function*(){p.dismiss()})}]});yield p.present(),yield p.onDidDismiss()})}segmentChanged(d){}onOpenAdd(){return(0,f.mG)(this,void 0,void 0,function*(){let d=null;d=yield this.modalCtrl.create({component:e.t,cssClass:"modal-fullscreen",backdropDismiss:!1,canDismiss:!1,componentProps:{modal:d,isNew:!0,currentUser:this.currentUser,durationInHours:1}}),d.present();const{role:c}=yield d.onWillDismiss();"confirm"===c&&(yield this.getReservation(this.currentUser.clientId))})}onOpenPending(){return(0,f.mG)(this,void 0,void 0,function*(){let d=null;d=yield this.modalCtrl.create({component:U.W,cssClass:"modal-fullscreen",componentProps:{currentUser:this.currentUser}}),d.onWillDismiss().then(p=>{p.data&&this.getReservation(this.currentUser.clientId)}),d.present(),yield d.onWillDismiss()})}onOpenDetails(d){return(0,f.mG)(this,void 0,void 0,function*(){const p=yield this.modalCtrl.create({component:E.k,cssClass:"modal-fullscreen",componentProps:{details:d,currentUser:this.currentUser}});p.present(),yield p.onWillDismiss()})}history(){return(0,f.mG)(this,void 0,void 0,function*(){let d=null;d=yield this.modalCtrl.create({component:Z.O,cssClass:"modal-fullscreen",componentProps:{currentUser:this.currentUser}}),d.present(),yield d.onWillDismiss()})}presentAlert(d){return(0,f.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create(d)).present()})}logout(){this.authService.logout()}}return u.\u0275fac=function(d){return new(d||u)(n.Y36(t.BX),n.Y36(t.IN),n.Y36(t.Br),n.Y36(x.D),n.Y36(A.e),n.Y36(S.V),n.Y36(J.K),n.Y36(w.D),n.Y36(t.SH),n.Y36(i.F0),n.Y36(q._),n.Y36(t.t4))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-schedule"]],decls:20,vars:10,consts:[["no-border","","no-shadow",""],["slot","start",2,"width","48px"],[2,"text-align","center"],["slot","end"],[3,"click",4,"ngIf"],["fullscreen",""],["slot","fixed","class","refresher-custom",3,"ionRefresh",4,"ngIf"],[4,"ngIf"],[2,"display","flex","flex-direction","column"],["class","list-title",4,"ngIf"],["style","display: flex; flex-direction: column;",4,"ngIf","ngIfElse"],["elseNoData",""],["elseLoading",""],[1,"sched-controls-bottom"],["color","primary","size","large","expand","block",3,"disabled","click"],[3,"click"],["slot","icon-only","name","time-outline"],["slot","fixed",1,"refresher-custom",3,"ionRefresh"],["mode","ios"],["lines","none"],["button","",3,"click",4,"ngIf","ngIfElse"],["elseLoadingPending",""],["button","",3,"click"],["color","primary"],[3,"animated"],[1,"list-title"],[4,"ngFor","ngForOf"],[1,"sched-card"],[1,"card-header"],[1,"date"],[1,"card-content"],[1,"content-row","border"],[1,"field"],[1,"value"],[1,"content-row"],[1,"field","action"],["name","ellipsis-vertical-sharp"],[1,"field","type"],["class","value",4,"ngIf"],[1,"no-records"],["name","search-outline",2,"font-size","4em"],[1,"text"],[1,"card-header",2,"width","90px!important"],[2,"width","100%!important"],[1,"date",2,"width","100%!important"],[1,"field","vet",2,"width","100%!important"],[1,"field","type",2,"width","100%!important"]],template:function(d,p){if(1&d&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar"),n._UZ(2,"div",1),n.TgZ(3,"ion-title",2),n._uU(4,"Schedule"),n.qZA(),n.TgZ(5,"ion-buttons",3),n.YNc(6,b,2,0,"ion-button",4),n.qZA()()(),n.TgZ(7,"ion-content",5),n.YNc(8,a,2,0,"ion-refresher",6),n.YNc(9,g,6,2,"div",7),n.TgZ(10,"div",8),n.YNc(11,P,2,0,"h2",9),n.YNc(12,Q,2,1,"div",10),n.YNc(13,F,4,0,"ng-template",null,11,n.W1O),n.qZA(),n.YNc(15,G,2,2,"ng-template",null,12,n.W1O),n.qZA(),n.TgZ(17,"div",13)(18,"ion-button",14),n.NdJ("click",function(){return p.isAuthenticated?p.onOpenAdd():p.logout()}),n._uU(19),n.qZA()()),2&d){const c=n.MAs(14);n.xp6(6),n.Q6J("ngIf",p.isAuthenticated),n.xp6(2),n.Q6J("ngIf",!p.isLoading&&p.isAuthenticated),n.xp6(1),n.Q6J("ngIf",p.isAuthenticated),n.xp6(1),n.Akn(p.isAuthenticated?"height: 60%":"height: 100%"),n.xp6(1),n.Q6J("ngIf",p.isAuthenticated),n.xp6(1),n.Q6J("ngIf",p.reservation.length>0)("ngIfElse",c),n.xp6(6),n.Q6J("disabled",p.isLoading),n.xp6(1),n.Oqu(p.isAuthenticated?"Book new Reservation":"Login to book reservation")}},dependencies:[_.sg,_.O5,t.yp,t.YG,t.Sm,t.PM,t.W2,t.Gu,t.gu,t.Ie,t.Q$,t.q_,t.nJ,t.Wo,t.CK,t.wd,t.sr,_.uU,v.O],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:0!important}  .mat-tab-group{height:100%;display:flex}  .mat-tab-group .mat-tab-labels{justify-content:space-around}  .mat-tab-group .mat-tab-body-wrapper{display:flex;flex-grow:1;height:100%}.sched-controls-bottom[_ngcontent-%COMP%]{z-index:1000;position:relative;display:block;width:100%;background:#ffffff;padding:5px 10px;box-shadow:0 3px 10px #0003}.sched-controls-bottom[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:45px;font-size:15px}.list-title[_ngcontent-%COMP%]{margin:10px 25px!important;display:flex}.sched-card[_ngcontent-%COMP%]{display:flex;padding:30px 20px}.sched-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-right:20px;border-right:1px solid #cccccc;justify-content:space-between}.sched-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;margin:0}.sched-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{display:flex;line-height:1;margin:0!important;font-size:60px;color:var(--ion-color-danger-tint)}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;padding-left:20px}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .field.action[_ngcontent-%COMP%]{width:45px!important;height:45px!important;position:absolute;right:3px;top:5px;display:flex}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .field.action[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{display:flex;flex-grow:1;min-width:45px!important}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .field.action[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex-grow:1;min-width:45px!important;--border-radius: 50%!important}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;display:-webkit-box;-webkit-box-orient:vertical;line-height:25px}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]{padding-top:15px!important;display:flex;flex-grow:1;flex-direction:row;justify-content:space-between}.sched-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .content-row.border[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:15px;border-bottom:1px solid #cccccc}"]}),u})()},{path:"schedule-details",loadChildren:()=>r.e(8553).then(r.bind(r,8553)).then(u=>u.ScheduleDetailsPageModule)},{path:"add-schedule",loadChildren:()=>r.e(2330).then(r.bind(r,2330)).then(u=>u.AddSchedulePageModule)},{path:"schedule-pending",loadChildren:()=>r.e(3311).then(r.bind(r,3311)).then(u=>u.SchedulePendingPageModule)},{path:"schedule-history",loadChildren:()=>r.e(4415).then(r.bind(r,4415)).then(u=>u.ScheduleHistoryPageModule)}];let j=(()=>{class u{}return u.\u0275fac=function(d){return new(d||u)},u.\u0275mod=n.oAB({type:u}),u.\u0275inj=n.cJS({imports:[i.Bz.forChild(z),i.Bz]}),u})();var $=r(5268),X=r(5815);let V=(()=>{class u{}return u.\u0275fac=function(d){return new(d||u)},u.\u0275mod=n.oAB({type:u}),u.\u0275inj=n.cJS({imports:[_.ez,y.u5,t.Pc,y.UX,j,$.q,X.d]}),u})()}}]);