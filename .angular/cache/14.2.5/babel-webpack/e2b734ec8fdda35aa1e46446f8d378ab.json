{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Validators } from '@angular/forms';\nimport { MyErrorStateMatcher } from '../../../core/form-validation/error-state.matcher';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/core/services/app-config.service\";\nimport * as i4 from \"../../../core/services/auth.service\";\nimport * as i5 from \"src/app/core/ui-service/page-loader.service\";\nimport * as i6 from \"@ionic/angular\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/icon\";\nimport * as i10 from \"@angular/material/form-field\";\nimport * as i11 from \"@angular/material/input\";\nimport * as i12 from \"../../../core/directive/ionselect-autoscroll.directive\";\n\nfunction RegisterPage_ng_template_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-datetime\", 37);\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"showDefaultButtons\", true);\n  }\n}\n\nfunction RegisterPage_span_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 38);\n    i0.ɵɵtext(1, \" Please select a gender \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let RegisterPage = /*#__PURE__*/(() => {\n  class RegisterPage {\n    constructor(formBuilder, router, appconfig, authService, pageLoaderService, alertController) {\n      this.formBuilder = formBuilder;\n      this.router = router;\n      this.appconfig = appconfig;\n      this.authService = authService;\n      this.pageLoaderService = pageLoaderService;\n      this.alertController = alertController;\n      this.isSubmitting = false;\n      this.matcher = new MyErrorStateMatcher();\n      this.defaultDate = new Date();\n\n      this.checkPasswords = group => {\n        const pass = group.get('password').value;\n        const confirmPass = group.get('confirmPassword').value;\n        return pass === confirmPass ? null : {\n          notSame: true\n        };\n      };\n    }\n\n    ngOnInit() {\n      this.registerForm = this.formBuilder.group({\n        firstName: [null, Validators.required],\n        middleName: [null],\n        lastName: [null, Validators.required],\n        email: [null, Validators.required],\n        mobileNumber: [null, [Validators.required, Validators.pattern('^[0-9]*$'), Validators.minLength(11), Validators.maxLength(11)]],\n        address: [null, Validators.required],\n        birthDate: [this.defaultDate.toISOString(), Validators.required],\n        genderId: [null, Validators.required],\n        username: [null, Validators.required],\n        password: [null, Validators.required],\n        confirmPassword: ''\n      }, {\n        validators: this.checkPasswords\n      });\n    }\n\n    get controls() {\n      return this.registerForm.controls;\n    }\n\n    onFormSubmit(form) {\n      return __awaiter(this, void 0, void 0, function* () {\n        console.log(form);\n\n        if (!this.registerForm.valid) {\n          return;\n        }\n\n        try {\n          this.isSubmitting = true;\n          yield this.pageLoaderService.open('Processing please wait...');\n          this.authService.register(form).subscribe(res => __awaiter(this, void 0, void 0, function* () {\n            if (res.success) {\n              console.log(res.data);\n              yield this.presentAlert({\n                header: 'Saved!',\n                buttons: ['OK']\n              }).then(() => __awaiter(this, void 0, void 0, function* () {\n                if (this.appconfig.config.auth.requireOTP === true) {\n                  const navigationExtras = {\n                    state: {\n                      data: {\n                        userId: res.data.user.userId\n                      }\n                    }\n                  };\n                  this.router.navigate(['verify-otp'], navigationExtras);\n                  yield this.pageLoaderService.close();\n                } else {\n                  this.router.navigate(['/login'], {\n                    replaceUrl: true\n                  });\n                  yield this.pageLoaderService.close();\n                }\n\n                this.isSubmitting = false;\n              }));\n              yield this.pageLoaderService.close();\n            } else {\n              yield this.pageLoaderService.close();\n              this.isSubmitting = false;\n              yield this.presentAlert({\n                header: 'Try again!',\n                message: Array.isArray(res.message) ? res.message[0] : res.message,\n                buttons: ['OK']\n              });\n            }\n          }), err => __awaiter(this, void 0, void 0, function* () {\n            yield this.pageLoaderService.close();\n            this.isSubmitting = false;\n            yield this.presentAlert({\n              header: 'Try again!',\n              message: Array.isArray(err.message) ? err.message[0] : err.message,\n              buttons: ['OK']\n            });\n          }));\n        } catch (e) {\n          yield this.pageLoaderService.close();\n          this.isSubmitting = false;\n          yield this.presentAlert({\n            header: 'Try again!',\n            message: Array.isArray(e.message) ? e.message[0] : e.message,\n            buttons: ['OK']\n          });\n        }\n      });\n    }\n\n    presentAlert(options) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const alert = yield this.alertController.create(options);\n        return yield alert.present();\n      });\n    }\n\n  }\n\n  RegisterPage.ɵfac = function RegisterPage_Factory(t) {\n    return new (t || RegisterPage)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AppConfigService), i0.ɵɵdirectiveInject(i4.AuthService), i0.ɵɵdirectiveInject(i5.PageLoaderService), i0.ɵɵdirectiveInject(i6.AlertController));\n  };\n\n  RegisterPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RegisterPage,\n    selectors: [[\"app-register\"]],\n    decls: 93,\n    vars: 14,\n    consts: [[1, \"register\", \"container\"], [1, \"form-container\"], [\"id\", \"registerForm\", 3, \"formGroup\", \"ngSubmit\"], [\"documentEditForm\", \"ngForm\"], [3, \"disabled\"], [1, \"form-field-group\"], [1, \"app_banner\"], [1, \"image-container\"], [\"src\", \"../../../../assets/img/app_banner.png\"], [1, \"register-text\"], [\"appearance\", \"outline\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"First name\", \"formControlName\", \"firstName\", \"autocomplete\", \"new-firstName\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Middle name\", \"formControlName\", \"middleName\", \"autocomplete\", \"new-middleName\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Last name\", \"formControlName\", \"lastName\", \"autocomplete\", \"new-lastName\"], [\"matInput\", \"\", \"type\", \"email\", \"placeholder\", \"Email\", \"formControlName\", \"email\", \"autocomplete\", \"new-email\", \"autocapitalize\", \"none\", \"oninput\", \"this.value = this.value.toLowerCase()\"], [\"matInput\", \"\", \"type\", \"number\", \"placeholder\", \"Mobile number\", \"formControlName\", \"mobileNumber\", \"autocomplete\", \"new-mobileNumber\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Address\", \"formControlName\", \"address\"], [\"slot\", \"start\"], [\"id\", \"open-birthDate-picker\", \"fill\", \"outline\", \"lines\", \"none\", 3, \"disabled\"], [\"trigger\", \"open-birthDate-picker\", 3, \"cssClass\"], [\"fill\", \"outline\", 3, \"disabled\"], [\"slot\", \"start\", \"formControlName\", \"genderId\", \"placeholder\", \"Select Gender\"], [\"slot\", \"start\", \"value\", \"1\"], [\"slot\", \"start\", \"value\", \"2\"], [\"slot\", \"start\", \"value\", \"3\"], [\"class\", \"error\", 4, \"ngIf\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Username\", \"formControlName\", \"username\", \"autocomplete\", \"new-username\", \"autocapitalize\", \"none\", \"oninput\", \"this.value = this.value.toLowerCase()\"], [\"matInput\", \"\", \"type\", \"password\", \"placeholder\", \"Password\", \"formControlName\", \"password\", \"autocomplete\", \"new-password\"], [\"password\", \"\"], [\"matSuffix\", \"\", 1, \"icon-right\", 2, \"cursor\", \"pointer\", 3, \"click\"], [\"matInput\", \"\", \"type\", \"password\", \"placeholder\", \"Confirm password\", \"formControlName\", \"confirmPassword\", \"autocomplete\", \"new-confirmPassword\", 3, \"errorStateMatcher\"], [\"confirmPassword\", \"\"], [1, \"register-footer\"], [1, \"action\"], [\"form\", \"registerForm\", \"type\", \"submit\", \"mat-flat-button\", \"\", \"color\", \"primary\", 3, \"disabled\"], [1, \"footer-helper\"], [\"routerLink\", \"/login\", \"replaceUrl\", \"true\"], [\"presentation\", \"date\", \"size\", \"cover\", \"formControlName\", \"birthDate\", 3, \"showDefaultButtons\"], [1, \"error\"]],\n    template: function RegisterPage_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r5 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"ion-content\")(1, \"div\", 0)(2, \"div\", 1)(3, \"form\", 2, 3);\n        i0.ɵɵlistener(\"ngSubmit\", function RegisterPage_Template_form_ngSubmit_3_listener() {\n          return ctx.onFormSubmit(ctx.registerForm.value);\n        });\n        i0.ɵɵelementStart(5, \"fieldset\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"div\", 7);\n        i0.ɵɵelement(9, \"img\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"span\", 9);\n        i0.ɵɵtext(11, \"Create account\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 5)(13, \"mat-form-field\", 10)(14, \"mat-label\");\n        i0.ɵɵtext(15, \"First name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"input\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"div\", 5)(18, \"mat-form-field\", 10)(19, \"mat-label\");\n        i0.ɵɵtext(20, \"Middle name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"input\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\", 5)(23, \"mat-form-field\", 10)(24, \"mat-label\");\n        i0.ɵɵtext(25, \"Last name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(26, \"input\", 13);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(27, \"div\", 5)(28, \"mat-form-field\", 10)(29, \"mat-label\");\n        i0.ɵɵtext(30, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"input\", 14);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(32, \"div\", 5)(33, \"mat-form-field\", 10)(34, \"mat-label\");\n        i0.ɵɵtext(35, \"Mobile number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(36, \"input\", 15);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(37, \"div\", 5)(38, \"mat-form-field\", 10)(39, \"mat-label\");\n        i0.ɵɵtext(40, \"Address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"textarea\", 16);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(42, \"div\", 5)(43, \"mat-label\", 17);\n        i0.ɵɵtext(44, \"Birthdate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"ion-item\", 18)(46, \"ion-label\");\n        i0.ɵɵtext(47);\n        i0.ɵɵpipe(48, \"date\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(49, \"ion-modal\", 19);\n        i0.ɵɵtemplate(50, RegisterPage_ng_template_50_Template, 1, 1, \"ng-template\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(51, \"div\", 5)(52, \"mat-label\");\n        i0.ɵɵtext(53, \"Gender \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"ion-item\", 20)(55, \"ion-select\", 21)(56, \"ion-select-option\", 22);\n        i0.ɵɵtext(57, \"Male\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(58, \"ion-select-option\", 23);\n        i0.ɵɵtext(59, \"Female\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(60, \"ion-select-option\", 24);\n        i0.ɵɵtext(61, \"Rather not say\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(62, RegisterPage_span_62_Template, 2, 0, \"span\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(63, \"div\", 5)(64, \"mat-form-field\", 10)(65, \"mat-label\");\n        i0.ɵɵtext(66, \"Username\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(67, \"input\", 26);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(68, \"div\", 5)(69, \"mat-form-field\", 10)(70, \"mat-label\");\n        i0.ɵɵtext(71, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(72, \"input\", 27, 28);\n        i0.ɵɵelementStart(74, \"mat-icon\", 29);\n        i0.ɵɵlistener(\"click\", function RegisterPage_Template_mat_icon_click_74_listener() {\n          i0.ɵɵrestoreView(_r5);\n\n          const _r3 = i0.ɵɵreference(73);\n\n          return i0.ɵɵresetView(_r3.type = _r3.type === \"password\" ? \"text\" : \"password\");\n        });\n        i0.ɵɵtext(75);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(76, \"div\", 5)(77, \"mat-form-field\", 10)(78, \"mat-label\");\n        i0.ɵɵtext(79, \"Confirm password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(80, \"input\", 30, 31);\n        i0.ɵɵelementStart(82, \"mat-icon\", 29);\n        i0.ɵɵlistener(\"click\", function RegisterPage_Template_mat_icon_click_82_listener() {\n          i0.ɵɵrestoreView(_r5);\n\n          const _r4 = i0.ɵɵreference(81);\n\n          return i0.ɵɵresetView(_r4.type = _r4.type === \"password\" ? \"text\" : \"password\");\n        });\n        i0.ɵɵtext(83);\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(84, \"div\", 32)(85, \"div\", 33)(86, \"button\", 34);\n        i0.ɵɵtext(87, \"Sign up\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(88, \"div\", 35)(89, \"span\");\n        i0.ɵɵtext(90, \"Already have an account? \");\n        i0.ɵɵelementStart(91, \"a\", 36);\n        i0.ɵɵtext(92, \"Login\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        const _r3 = i0.ɵɵreference(73);\n\n        const _r4 = i0.ɵɵreference(81);\n\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.registerForm);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", ctx.isSubmitting);\n        i0.ɵɵadvance(40);\n        i0.ɵɵproperty(\"disabled\", ctx.isSubmitting);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(48, 11, ctx.controls.birthDate.value, \"MMMM dd, yyyy\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"cssClass\", \"bottom-end\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"disabled\", ctx.isSubmitting);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.controls.genderId.touched && ctx.controls.genderId.errors && ctx.controls.genderId.errors.required);\n        i0.ɵɵadvance(13);\n        i0.ɵɵtextInterpolate(_r3.type === \"password\" ? \"visibility\" : \"visibility_off\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"errorStateMatcher\", ctx.matcher);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(_r4.type === \"password\" ? \"visibility\" : \"visibility_off\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", ctx.isSubmitting);\n      }\n    },\n    dependencies: [i7.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i6.IonContent, i6.IonDatetime, i6.IonItem, i6.IonLabel, i6.IonSelect, i6.IonSelectOption, i6.IonModal, i6.SelectValueAccessor, i6.RouterLinkWithHrefDelegate, i2.RouterLinkWithHref, i8.MatButton, i9.MatIcon, i10.MatFormField, i10.MatLabel, i10.MatSuffix, i11.MatInput, i12.IonselectAutoscrollDirective, i7.DatePipe],\n    styles: [\".container{height:100%;display:flex;padding:0 40px!important}.container.register{flex-direction:column;margin-top:30px;justify-content:flex-start!important}.container.register .app_banner{display:flex;flex-grow:1;justify-content:center;margin-bottom:27px!important}.container.register .app_banner .image-container{width:138px;height:48px;display:flex;justify-content:center}.container.register .app_banner .image-container img{height:100%;background-repeat:no-repeat;background-position:center center;background-size:cover}.container.register .register-text{text-align:center}.container.register span,.container.register input{font-size:16px;letter-spacing:0px;line-height:1.2}.container.register .form-container{display:flex;flex-grow:1;flex-direction:row;justify-content:center;align-items:center;padding-bottom:130px!important;width:100%!important}.container.register .register-footer{display:flex;align-items:center;flex-direction:column;height:130px;padding:20px 40px;position:fixed;width:100%;left:0;bottom:0;z-index:1000;background-color:#fff}.container.register .register-footer .action{width:100%;display:flex;flex-direction:column;row-gap:5px}.container.register .register-footer .action *{flex-grow:1}.container.register .register-footer .action button{height:53px;font-size:16px;letter-spacing:0px;line-height:1.2}.container.register .register-footer .footer-helper{display:flex;flex-grow:1;align-items:center;flex-direction:column;justify-content:flex-end}.container.register .register-footer .footer-helper *{color:#000!important}.container.register .register-footer .footer-helper a{text-decoration:underline}::ng-deep .datetime-calendar .calendar-body button{color:#000!important}::ng-deep .datetime-calendar .calendar-body button.calendar-day{color:#000!important}::ng-deep .datetime-calendar .calendar-body button.calendar-day.calendar-day-active{color:#fff!important}\\n\"],\n    encapsulation: 2\n  });\n  return RegisterPage;\n})();","map":null,"metadata":{},"sourceType":"module"}